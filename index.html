<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>رشدینو | بانک ایده‌های ورزشی دانشگاه فرهنگیان</title>
  
<link rel="icon" type="image/svg+xml" href="./photo24423565914.jpg">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
    /* =========================================
   SportEdu Pro — Premium CSS
   دانشگاه فرهنگیان
   ========================================= */

:root {
  --pri:#1a73e8; --pri-d:#1557b0; --pri-l:#4a9eff;
  --sec:#00897b; --sec-l:#26a69a;
  --acc:#ff6d00; --acc-l:#ff9100;
  --dark:#0d1117; --dark2:#161b22; --dark3:#21262d;
  --light:#f6f8fa; --light2:#eef1f5;
  --text:#1c2b3a; --text2:#546e8a; --text-inv:#f0f6fc;
  --bd:#d0dcea; --bd-dark:rgba(255,255,255,.1);
  --glass:rgba(255,255,255,.07);
  --glow:0 0 40px rgba(26,115,232,.35);
  --sh:0 4px 24px rgba(0,0,0,.08);
  --sh2:0 12px 48px rgba(0,0,0,.16);
  --r:16px; --r2:24px;
  --tr:all .3s cubic-bezier(.4,0,.2,1);
  --font:'Vazirmatn',Tahoma,sans-serif;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font);background:var(--light);color:var(--text);direction:rtl;overflow-x:hidden;line-height:1.7}
a{text-decoration:none;color:inherit}
ul,ol{list-style:none}
img{max-width:100%}

/* ── LOADER ── */
.page-loader{position:fixed;inset:0;background:var(--dark);z-index:9999;display:flex;align-items:center;justify-content:center;transition:opacity .6s, visibility .6s}
.page-loader.done{opacity:0;visibility:hidden}
.loader-inner{text-align:center}
.loader-icon{font-size:64px;animation:pulse 1s ease-in-out infinite}
.loader-brand{font-size:28px;font-weight:900;color:white;margin:12px 0}
.loader-track{width:200px;height:4px;background:var(--dark3);border-radius:2px;overflow:hidden;margin:0 auto 12px}
.loader-bar{height:100%;background:linear-gradient(90deg,var(--pri),var(--pri-l));width:0%;border-radius:2px;transition:width .05s linear}
.loader-sub{font-size:13px;color:rgba(255,255,255,.4)}

@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}

/* ── SIDE DOTS ── */
.side-nav{position:fixed;left:20px;top:50%;transform:translateY(-50%);z-index:500;display:flex;flex-direction:column;gap:8px}
.sdot{width:8px;height:8px;border-radius:50%;background:rgba(0,0,0,.2);display:block;transition:var(--tr);position:relative}
.sdot:hover::after,.sdot.active::after{content:attr(title);position:absolute;left:16px;top:50%;transform:translateY(-50%);background:var(--dark);color:white;font-size:11px;padding:3px 8px;border-radius:6px;white-space:nowrap;font-family:var(--font);opacity:1}
.sdot::after{content:attr(title);position:absolute;left:16px;top:50%;transform:translateY(-50%);background:var(--dark);color:white;font-size:11px;padding:3px 8px;border-radius:6px;white-space:nowrap;font-family:var(--font);opacity:0;transition:var(--tr);pointer-events:none}
.sdot.active{background:var(--pri);transform:scale(1.5)}
.s-dark .sdot,.s-dark .side-nav .sdot{background:rgba(255,255,255,.3)}

/* ── HEADER ── */
.hdr{position:fixed;top:0;left:0;right:0;z-index:900;background:rgba(255,255,255,.9);backdrop-filter:blur(16px);border-bottom:1px solid var(--bd);transition:var(--tr)}
.hdr.scrolled{box-shadow:0 4px 24px rgba(0,0,0,.1)}
.hdr-inner{max-width:1300px;margin:0 auto;padding:0 24px;height:64px;display:flex;align-items:center;justify-content:space-between;gap:20px}
.logo{display:flex;align-items:center;gap:12px}
.logo-mark{width:40px;height:40px;background:linear-gradient(135deg,var(--pri),var(--sec));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.lt-top{font-size:15px;font-weight:800;color:var(--pri);display:block}
.lt-bot{font-size:10px;color:var(--text2);display:block}
.desktop-nav{display:flex;gap:2px}
.desktop-nav a{padding:7px 13px;border-radius:8px;font-size:13px;font-weight:600;color:var(--text2);transition:var(--tr)}
.desktop-nav a:hover{background:var(--light2);color:var(--pri)}
.ham-btn{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:8px}
.ham-btn span{display:block;width:22px;height:2px;background:var(--text);border-radius:2px;transition:var(--tr)}
.mobile-menu{display:none;flex-direction:column;background:white;border-top:1px solid var(--bd);padding:12px 24px}
.mobile-menu a{padding:11px 0;border-bottom:1px solid var(--light2);font-weight:600;color:var(--text);font-size:14px}
.mobile-menu a:last-child{border-bottom:none}
.mobile-menu.open{display:flex}

/* ── HERO ── */
.hero{min-height:100vh;background:var(--dark);position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 24px 0;overflow:hidden}
.hero-canvas{position:absolute;inset:0;opacity:.5}
.hero-content{position:relative;z-index:2;text-align:center;max-width:760px;padding-bottom:120px}
.hero-eyebrow{display:inline-block;background:rgba(26,115,232,.2);border:1px solid rgba(26,115,232,.4);color:var(--pri-l);padding:8px 20px;border-radius:100px;font-size:13px;font-weight:600;margin-bottom:28px;letter-spacing:.5px}
.hero-h1{font-size:clamp(52px,9vw,100px);font-weight:900;color:white;line-height:1;margin-bottom:20px;letter-spacing:-2px}
.hero-h1 em{font-style:normal;color:var(--pri-l)}
.h1-pro{background:linear-gradient(135deg,var(--acc),var(--acc-l));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-p{font-size:18px;color:rgba(255,255,255,.65);margin-bottom:32px;line-height:1.8}
.hero-chips{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:36px}
.hero-chips span{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:rgba(255,255,255,.8);padding:7px 16px;border-radius:100px;font-size:13px;font-weight:500;transition:var(--tr)}
.hero-chips span:hover{background:var(--pri);border-color:var(--pri);color:white;transform:translateY(-2px)}
.hero-cta-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.cta-main{background:var(--pri);color:white;padding:16px 36px;border-radius:12px;font-size:16px;font-weight:700;box-shadow:var(--glow);transition:var(--tr)}
.cta-main:hover{transform:translateY(-3px);box-shadow:0 0 60px rgba(26,115,232,.5)}
.cta-outline{background:transparent;border:2px solid rgba(255,255,255,.2);color:white;padding:14px 32px;border-radius:12px;font-size:16px;font-weight:700;transition:var(--tr)}
.cta-outline:hover{background:rgba(255,255,255,.1);border-color:white}
.hero-stats-bar{position:absolute;bottom:0;left:0;right:0;z-index:2;background:rgba(255,255,255,.05);backdrop-filter:blur(12px);border-top:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;gap:0;padding:0}
.hs{text-align:center;padding:20px 48px;flex:1;max-width:200px}
.hs b{display:block;font-size:32px;font-weight:900;color:white}
.hs small{font-size:12px;color:rgba(255,255,255,.5);font-weight:500}
.hs-div{width:1px;height:40px;background:rgba(255,255,255,.1)}

/* ── SECTIONS ── */
.sec{padding:96px 0}
.s-dark{background:var(--dark2);color:var(--text-inv)}
.con{max-width:1200px;margin:0 auto;padding:0 24px}
.sh{text-align:center;margin-bottom:56px}
.sh.light h2,.sh.light p{color:var(--text-inv)}
.sh.light p{opacity:.7}
.sbadge{display:inline-flex;align-items:center;gap:8px;padding:6px 16px;border-radius:100px;font-size:12px;font-weight:700;letter-spacing:.5px;margin-bottom:16px;background:linear-gradient(135deg,var(--pri),var(--sec));color:white}
.sbadge.light{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:white}
.sbadge b{background:rgba(255,255,255,.2);padding:1px 8px;border-radius:100px}
.sh h2{font-size:clamp(28px,4vw,42px);font-weight:900;margin-bottom:12px}
.sh p{font-size:16px;color:var(--text2);max-width:480px;margin:0 auto}

/* ── CARDS ── */
.card{background:white;border-radius:var(--r2);border:1px solid var(--bd);box-shadow:var(--sh);padding:32px}
.glass-c{background:rgba(255,255,255,.06);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.12);border-radius:var(--r2);padding:32px;color:var(--text-inv)}

/* ── BUTTONS ── */
.btn-p{display:block;width:100%;padding:14px;background:linear-gradient(135deg,var(--pri),var(--pri-l));color:white;border:none;border-radius:12px;font-family:var(--font);font-size:15px;font-weight:700;cursor:pointer;transition:var(--tr);text-align:center}
.btn-p:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(26,115,232,.4)}
.btn-glow{display:inline-block;padding:14px 32px;background:var(--pri);color:white;border:none;border-radius:12px;font-family:var(--font);font-size:15px;font-weight:700;cursor:pointer;transition:var(--tr);box-shadow:var(--glow)}
.btn-glow:hover{transform:translateY(-3px);box-shadow:0 0 60px rgba(26,115,232,.5)}
.btn-glow-sm{padding:10px 18px;background:rgba(26,115,232,.9);color:white;border:none;border-radius:10px;font-family:var(--font);font-size:13px;font-weight:700;cursor:pointer;transition:var(--tr)}
.btn-glow-sm:hover{background:var(--pri);transform:translateY(-1px)}
.btn-ghost2{display:inline-block;padding:12px 24px;background:transparent;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.7);border-radius:10px;font-family:var(--font);font-size:14px;font-weight:600;cursor:pointer;transition:var(--tr);margin-top:8px}
.btn-ghost2:hover{background:rgba(255,255,255,.1)}
.btn-ghost{display:inline-block;padding:12px 24px;background:transparent;border:1px solid var(--bd);color:var(--text2);border-radius:10px;font-family:var(--font);font-size:14px;font-weight:600;cursor:pointer;transition:var(--tr);width:100%;text-align:center;margin-top:4px}
.btn-ghost:hover{border-color:var(--pri);color:var(--pri)}
.btn-ghost-dark{display:block;width:100%;padding:12px;background:transparent;border:1px solid var(--bd);color:var(--text2);border-radius:10px;font-family:var(--font);font-size:14px;font-weight:600;cursor:pointer;transition:var(--tr);text-align:center}
.btn-ghost-dark:hover{border-color:var(--pri);color:var(--pri)}
.btn-ghost-sm{background:transparent;border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.7);padding:9px 18px;border-radius:10px;font-family:var(--font);font-size:13px;font-weight:600;cursor:pointer;transition:var(--tr)}
.btn-ghost-sm:hover{background:rgba(255,255,255,.1)}
.btn-sm{padding:10px 14px;background:var(--pri);color:white;border:none;border-radius:8px;font-family:var(--font);font-size:14px;font-weight:700;cursor:pointer;transition:var(--tr)}
.btn-sm:hover{background:var(--pri-d)}

/* ── INPUTS ── */
.inp{width:100%;padding:12px 14px;border:2px solid var(--bd);border-radius:10px;font-family:var(--font);font-size:14px;color:var(--text);background:var(--light);outline:none;transition:var(--tr)}
.inp:focus{border-color:var(--pri);background:white;box-shadow:0 0 0 4px rgba(26,115,232,.08)}
.gi{width:100%;padding:11px 14px;border:1px solid rgba(255,255,255,.15);border-radius:10px;font-family:var(--font);font-size:14px;color:white;background:rgba(255,255,255,.08);outline:none;transition:var(--tr)}
.gi:focus{border-color:rgba(26,115,232,.6);background:rgba(255,255,255,.12)}
.sld{width:100%;-webkit-appearance:none;appearance:none;height:6px;border-radius:3px;background:rgba(255,255,255,.2);outline:none;cursor:pointer}
.sld::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;border-radius:50%;background:var(--pri);cursor:pointer;box-shadow:0 0 8px rgba(26,115,232,.5);transition:var(--tr)}
.sld::-webkit-slider-thumb:hover{transform:scale(1.2)}

/* ── FORM HELPERS ── */
.ig{margin-bottom:20px}
.ig label{display:block;font-size:13px;font-weight:600;color:rgba(255,255,255,.7);margin-bottom:8px}
.fi{margin-bottom:16px}
.fi label{display:block;font-size:13px;font-weight:600;color:var(--text2);margin-bottom:8px}
.fi.full{grid-column:1/-1}
.form2{display:grid;grid-template-columns:1fr 1fr;gap:16px}

/* ── IDEAS ── */
.filter-row{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:24px}
.fb{padding:8px 20px;border-radius:100px;border:2px solid var(--bd);background:white;color:var(--text2);font-family:var(--font);font-size:13px;font-weight:600;cursor:pointer;transition:var(--tr)}
.fb:hover{border-color:var(--pri);color:var(--pri)}
.fb.active{background:var(--pri);border-color:var(--pri);color:white;box-shadow:0 4px 12px rgba(26,115,232,.3)}
.search-box{position:relative;max-width:440px;margin:0 auto 48px;display:flex;align-items:center}
.sinp{width:100%;padding:14px 48px 14px 20px;border-radius:100px;border:2px solid var(--bd);font-family:var(--font);font-size:14px;background:white;outline:none;transition:var(--tr);box-shadow:var(--sh)}
.sinp:focus{border-color:var(--pri)}
.search-box span{position:absolute;left:16px;font-size:18px}
.ideas-g{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:24px}
.ic{background:white;border-radius:var(--r2);border:1px solid var(--bd);overflow:hidden;box-shadow:var(--sh);transition:var(--tr);display:flex;flex-direction:column;animation:fadeUp .4s ease both}
.ic:hover{transform:translateY(-6px);box-shadow:var(--sh2);border-color:var(--pri)}
@keyframes fadeUp{from{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}
.ic:nth-child(1){animation-delay:.05s}.ic:nth-child(2){animation-delay:.1s}.ic:nth-child(3){animation-delay:.15s}.ic:nth-child(4){animation-delay:.2s}
.ic-top{padding:24px 20px 12px;display:flex;gap:14px;align-items:flex-start}
.ic-em{width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:26px;flex-shrink:0}
.ic-ttl{font-size:16px;font-weight:800;margin-bottom:6px}
.ic-cat{display:inline-block;padding:3px 10px;border-radius:100px;font-size:11px;font-weight:700}
.ic-body{padding:0 20px 16px;flex:1}
.ic-desc{font-size:13px;color:var(--text2);line-height:1.7;margin-bottom:12px}
.ic-tags{display:flex;flex-wrap:wrap;gap:6px}
.ic-tag{background:var(--light2);border-radius:6px;padding:3px 9px;font-size:11px;color:var(--text2);font-weight:500}
.ic-foot{padding:14px 20px;border-top:1px solid var(--bd);display:flex;align-items:center;justify-content:space-between}
.ic-btn{background:none;border:1px solid var(--pri);color:var(--pri);padding:6px 14px;border-radius:8px;font-family:var(--font);font-size:12px;font-weight:700;cursor:pointer;transition:var(--tr)}
.ic-btn:hover{background:var(--pri);color:white}

/* ── BMI ── */
.bmi-lay{display:grid;grid-template-columns:1fr 1fr;gap:32px;align-items:start}
.bmi-form h3{font-size:18px;font-weight:800;margin-bottom:24px;color:white}
.gen-toggle{display:flex;gap:8px}
.gb{padding:10px 24px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.08);color:rgba(255,255,255,.7);font-family:var(--font);font-size:14px;font-weight:700;cursor:pointer;transition:var(--tr);flex:1}
.gb.active{background:var(--pri);border-color:var(--pri);color:white}
.gauge-wrap{position:relative;margin-bottom:20px}
.gauge-svg{width:100%;max-width:240px;display:block;margin:0 auto}
.gauge-val{position:absolute;bottom:0;left:50%;transform:translateX(-50%);text-align:center}
.gauge-val span{font-size:36px;font-weight:900;color:white;display:block;line-height:1}
.gauge-val small{font-size:12px;color:rgba(255,255,255,.5)}
.bmi-badge{text-align:center;font-size:18px;font-weight:700;padding:12px 24px;border-radius:12px;background:rgba(255,255,255,.1);margin-bottom:16px}
.bmi-scale{display:flex;gap:4px;margin-bottom:16px}
.bs-item{flex:1;text-align:center;padding:8px 4px;border-radius:8px;font-size:11px;font-weight:600;background:rgba(255,255,255,.06);border:1px solid var(--c,transparent);color:rgba(255,255,255,.8)}
.bmi-advice-box{background:rgba(255,255,255,.08);border-radius:12px;padding:14px;font-size:13px;color:rgba(255,255,255,.8);line-height:1.6;margin-bottom:12px}
.bmi-ideal{text-align:center;font-size:13px;color:rgba(255,255,255,.6)}

/* ── CALORIE ── */
.cal-lay{display:grid;grid-template-columns:1fr 1fr;gap:32px;align-items:start}
.cal-form h3,.cal-res h3{font-size:18px;font-weight:800;margin-bottom:24px}
.goal-btns{display:flex;gap:8px}
.gb2{flex:1;padding:10px;border-radius:10px;border:2px solid var(--bd);background:var(--light);font-family:var(--font);font-size:13px;font-weight:700;cursor:pointer;transition:var(--tr);color:var(--text2)}
.gb2.active{background:var(--pri);border-color:var(--pri);color:white}
.gb2:hover{border-color:var(--pri)}
.cal-metrics{display:flex;gap:16px;margin-bottom:20px}
.cm{flex:1;text-align:center;padding:20px 12px;border-radius:14px;background:var(--light2);border:1px solid var(--bd)}
.cm.hi{background:linear-gradient(135deg,var(--pri),var(--pri-l));border:none;box-shadow:0 8px 24px rgba(26,115,232,.3)}
.cm.hi .cm-v{color:white}.cm.hi .cm-l{color:rgba(255,255,255,.8)}
.cm-ic{font-size:24px;margin-bottom:8px}
.cm-v{font-size:24px;font-weight:900;color:var(--pri);margin-bottom:4px}
.cm-l{font-size:12px;color:var(--text2);line-height:1.3}
.macro-row{display:flex;gap:12px;margin-bottom:16px}
.macro-item{flex:1;background:var(--light2);border-radius:10px;padding:12px;text-align:center}
.macro-item b{display:block;font-size:16px;font-weight:800;color:var(--pri)}
.macro-item small{font-size:11px;color:var(--text2)}
.macro-bar-row{margin-bottom:8px}
.macro-bar-label{display:flex;justify-content:space-between;font-size:12px;color:var(--text2);margin-bottom:4px}
.macro-bar-track{height:8px;background:var(--light2);border-radius:4px;overflow:hidden}
.macro-bar-fill{height:100%;border-radius:4px}
.food-eq{margin-top:16px;padding:14px;background:var(--light2);border-radius:12px}
.food-eq h4{font-size:13px;font-weight:700;margin-bottom:10px;color:var(--text)}
.food-eq-grid{display:flex;flex-wrap:wrap;gap:8px}
.feq{background:white;border-radius:8px;padding:6px 12px;font-size:12px;font-weight:600;color:var(--text)}

/* ── ROADMAP ── */
.rm-lay{display:grid;grid-template-columns:320px 1fr;gap:32px;align-items:start}
.rm-form h3{font-size:18px;font-weight:800;margin-bottom:24px;color:white}
.rm-sum{margin-bottom:24px;padding:20px;border-radius:14px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12)}
.rm-sum h3{font-size:16px;font-weight:700;margin-bottom:12px;color:white}
.rm-sum-items{display:flex;flex-wrap:wrap;gap:12px}
.rsi{background:rgba(255,255,255,.06);border-radius:10px;padding:10px 16px;text-align:center;flex:1;min-width:100px}
.rsi b{display:block;font-size:18px;font-weight:900;color:var(--pri-l)}
.rsi small{font-size:11px;color:rgba(255,255,255,.6)}
.rm-phases-title{font-size:15px;font-weight:700;margin-bottom:16px;color:white}
.phase-item{display:flex;gap:14px;margin-bottom:16px;align-items:flex-start}
.phase-num{width:32px;height:32px;border-radius:50%;background:var(--pri);color:white;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;flex-shrink:0}
.phase-body{flex:1;background:rgba(255,255,255,.06);border-radius:12px;padding:14px}
.phase-body h4{font-size:14px;font-weight:700;color:white;margin-bottom:6px}
.phase-body p{font-size:13px;color:rgba(255,255,255,.7);line-height:1.6}
.rm-tips{margin-top:16px;padding:14px 16px;background:rgba(255,165,0,.1);border:1px solid rgba(255,165,0,.3);border-radius:12px}
.rm-tips h4{font-size:13px;font-weight:700;color:var(--acc-l);margin-bottom:8px}
.rm-tips li{font-size:13px;color:rgba(255,255,255,.7);line-height:1.6;padding-right:12px;position:relative}
.rm-tips li::before{content:"•";position:absolute;right:0;color:var(--acc-l)}

/* ── TIMER ── */
.timer-lay{display:grid;grid-template-columns:1fr 1fr;gap:32px;align-items:start}
.timer-cfg h3{font-size:18px;font-weight:800;margin-bottom:20px}
.presets{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:24px}
.pre{padding:12px 8px;border-radius:10px;border:2px solid var(--bd);background:var(--light2);font-family:var(--font);font-size:12px;font-weight:700;cursor:pointer;transition:var(--tr);color:var(--text);text-align:center;line-height:1.5}
.pre:hover{border-color:var(--pri);background:rgba(26,115,232,.05);color:var(--pri)}
.ex-section{margin-top:20px}
.ex-section h4{font-size:14px;font-weight:700;margin-bottom:10px}
.ex-add{display:flex;gap:8px}
.ex-chips{display:flex;flex-wrap:wrap;gap:6px;margin-top:10px}
.ex-chip{background:var(--light2);border:1px solid var(--bd);border-radius:8px;padding:5px 10px;font-size:12px;font-weight:600;display:flex;align-items:center;gap:6px}
.ex-chip button{background:none;border:none;cursor:pointer;color:var(--text2);font-size:14px;line-height:1;padding:0}
.t-phase{text-align:center;font-size:16px;font-weight:700;color:var(--pri);margin-bottom:20px;text-transform:uppercase;letter-spacing:1px}
.t-ring-wrap{position:relative;width:200px;height:200px;margin:0 auto 24px}
.t-svg{width:100%;height:100%}
.t-inner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.t-num{font-size:48px;font-weight:900;color:var(--text)}
.t-sub{font-size:13px;color:var(--text2)}
.t-ctrl{display:flex;gap:12px;justify-content:center;margin-bottom:20px}
.tc{width:52px;height:52px;border-radius:50%;border:2px solid var(--bd);background:var(--light2);font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:var(--tr)}
.tc:hover{background:var(--pri);border-color:var(--pri);color:white;transform:scale(1.05)}
.t-info{display:flex;justify-content:center;gap:32px;text-align:center;padding:16px;background:var(--light2);border-radius:14px}
.t-info div{display:flex;flex-direction:column;gap:4px}
.t-info span{font-size:20px;font-weight:800;color:var(--pri)}
.t-info small{font-size:11px;color:var(--text2)}
.timer-work-phase .t-phase,.timer-work-phase .tRing{color:var(--acc)}

/* ── WATER ── */
.water-lay{display:grid;grid-template-columns:280px 1fr;gap:32px;align-items:start}
.water-vis{text-align:center}
.wbottle{width:120px;height:240px;border:3px solid rgba(255,255,255,.2);border-radius:20px 20px 30px 30px;overflow:hidden;margin:0 auto 16px;position:relative;background:rgba(255,255,255,.05)}
.w-fill{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(180deg,rgba(64,196,255,.6),rgba(0,100,210,.8));transition:height 1s cubic-bezier(.4,0,.2,1)}
.w-marks{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:space-between;padding:12px 0;right:4px;left:auto;font-size:10px;color:rgba(255,255,255,.4)}
.w-pct{font-size:32px;font-weight:900;color:white}
.w-ml{font-size:13px;color:rgba(255,255,255,.6);margin-bottom:8px}
.w-emoji{font-size:28px}
.water-ctrl h3{font-size:18px;font-weight:800;margin-bottom:20px;color:white}
.w-calc{display:flex;gap:8px;margin-bottom:12px}
.w-need{font-size:13px;color:rgba(255,255,255,.7);margin-bottom:16px;padding:10px 14px;background:rgba(255,255,255,.06);border-radius:10px;min-height:38px}
.w-btns{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.wadd{padding:14px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:rgba(255,255,255,.08);color:white;font-family:var(--font);font-size:13px;font-weight:700;cursor:pointer;transition:var(--tr);text-align:center;display:flex;align-items:center;justify-content:center;gap:8px}
.wadd span{font-size:20px}
.wadd:hover{background:var(--pri);border-color:var(--pri);transform:translateY(-2px)}
.w-custom{display:flex;gap:8px;margin-bottom:12px}
.w-log{margin-top:16px;max-height:140px;overflow-y:auto}
.w-log-item{font-size:12px;color:rgba(255,255,255,.6);padding:4px 0;border-bottom:1px solid rgba(255,255,255,.06)}

/* ── TRAINING ── */
.tr-tabs{display:flex;gap:8px;justify-content:center;margin-bottom:40px;flex-wrap:wrap}
.tt{padding:10px 24px;border-radius:100px;border:2px solid var(--bd);background:white;font-family:var(--font);font-size:14px;font-weight:600;cursor:pointer;color:var(--text2);transition:var(--tr)}
.tt:hover{border-color:var(--sec)}
.tt.active{background:var(--sec);border-color:var(--sec);color:white}
.tr-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:24px}
.tr-c{background:white;border-radius:var(--r2);padding:24px;border:1px solid var(--bd);box-shadow:var(--sh);transition:var(--tr)}
.tr-c:hover{transform:translateY(-4px);box-shadow:var(--sh2)}
.tr-c-icon{font-size:36px;margin-bottom:12px}
.tr-c h3{font-size:16px;font-weight:800;margin-bottom:8px}
.tr-c p{font-size:13px;color:var(--text2);margin-bottom:14px;line-height:1.7}
.tr-steps{padding-right:16px}
.tr-steps li{font-size:13px;color:var(--text2);margin-bottom:5px;list-style:decimal}
.safety-note{margin-top:12px;padding:10px 12px;background:#fff8e1;border-right:3px solid #ffc107;border-radius:8px;font-size:12px;color:#7b5800}

/* ── GAME ── */
.game-wrap{max-width:640px;margin:0 auto}
.game-start,.game-play,.game-res{text-align:center}
.gt{font-size:64px;margin-bottom:16px}
.game-start h3{font-size:24px;font-weight:900;color:white;margin-bottom:8px}
.game-start p{color:rgba(255,255,255,.7);margin-bottom:20px;font-size:15px}
.g-chips{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:28px}
.g-chips span{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:rgba(255,255,255,.8);padding:6px 14px;border-radius:100px;font-size:13px}
.hidden{display:none!important}
.g-hdr{display:flex;align-items:center;justify-content:space-between;background:var(--pri);color:white;padding:14px 20px;border-radius:14px 14px 0 0;flex-wrap:wrap;gap:8px}
.g-sc,.g-qn{font-size:14px;font-weight:700}
.g-tr{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:700;color:white}
.g-tr-ring{width:80px;height:6px;background:rgba(255,255,255,.3);border-radius:3px;overflow:hidden}
.g-tr-fill{height:100%;background:#76ff03;border-radius:3px;transition:width 1s linear}
.q-bar{height:3px;background:rgba(255,255,255,.1)}
.q-bar-fill{height:100%;background:var(--acc);transition:width .3s ease}
.q-txt{font-size:18px;font-weight:700;padding:28px 28px 20px;text-align:right;color:white;line-height:1.6}
.q-opts{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:0 20px 24px}
.qo{padding:14px 16px;border-radius:12px;border:2px solid rgba(255,255,255,.15);background:rgba(255,255,255,.07);font-family:var(--font);font-size:14px;font-weight:600;cursor:pointer;text-align:right;transition:var(--tr);color:white;line-height:1.4}
.qo:hover{border-color:var(--pri-l);background:rgba(26,115,232,.2)}
.qo.correct{background:rgba(76,175,80,.2);border-color:#4caf50;color:#a5d6a7}
.qo.wrong{background:rgba(239,83,80,.2);border-color:#ef5350;color:#ef9a9a}
.qo:disabled{cursor:not-allowed}
.q-exp{background:rgba(255,255,255,.08);border-right:3px solid var(--pri-l);padding:12px 16px;margin:0 20px 20px;border-radius:8px;font-size:13px;color:rgba(255,255,255,.8);text-align:right;line-height:1.6}
.rm{font-size:72px;margin-bottom:16px}
.r-score{font-size:40px;font-weight:900;color:var(--pri-l);margin:12px 0}
.game-res h3{font-size:22px;font-weight:900;color:white;margin-bottom:4px}
.game-res #rMsg{color:rgba(255,255,255,.7);margin-bottom:20px;font-size:15px}
.r-stats{background:rgba(255,255,255,.08);border-radius:12px;padding:14px 24px;margin-bottom:20px;display:flex;justify-content:center;gap:28px;flex-wrap:wrap}
.r-stats span{font-size:14px;font-weight:600;color:white}

/* ── PLANNER ── */
.pl-lay{display:grid;grid-template-columns:280px 1fr;gap:32px;align-items:start}
.pl-form h3{font-size:17px;font-weight:800;margin-bottom:20px}
.bal-box{padding:14px 18px;border-radius:12px;background:linear-gradient(135deg,#e8f5e9,#f1f8e9);border:1px solid #a5d6a7;margin-bottom:20px;font-size:13px;font-weight:600;color:#2e7d32;display:flex;gap:10px;align-items:flex-start}
.tbl-wrap{overflow-x:auto}
.ptbl{width:100%;border-collapse:collapse;background:white;border-radius:var(--r);overflow:hidden;box-shadow:var(--sh);font-size:13px}
.ptbl th{background:var(--pri);color:white;padding:12px 14px;font-weight:700;text-align:center}
.ptbl td{padding:12px 14px;text-align:center;border-bottom:1px solid var(--light2)}
.ptbl tr:last-child td{border-bottom:none}
.ptbl tr:hover td{background:var(--light)}
.sb{padding:4px 10px;border-radius:100px;font-size:11px;font-weight:700}
.sb.g{background:#e8f5e9;color:#2e7d32}.sb.w{background:#fff8e1;color:#f57f17}.sb.b{background:#ffebee;color:#c62828}
.del-btn{background:none;border:none;cursor:pointer;font-size:16px;padding:3px 6px;border-radius:6px;transition:var(--tr)}
.del-btn:hover{background:#ffebee}
.empty-msg{text-align:center;color:var(--text2);padding:28px;font-size:14px}

/* ── CHALLENGE ── */
.ch-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:14px;margin-bottom:40px}
.ch-day{background:rgba(255,255,255,.06);border:2px solid rgba(255,255,255,.1);border-radius:var(--r);padding:18px 10px;text-align:center;transition:var(--tr);cursor:pointer}
.ch-day:hover{background:rgba(255,255,255,.1);transform:translateY(-4px)}
.ch-day.done{background:rgba(76,175,80,.15);border-color:#4caf50}
.ch-dn{font-size:20px;font-weight:900;color:var(--pri-l);margin-bottom:2px}
.ch-dl{font-size:10px;color:rgba(255,255,255,.5);font-weight:600;margin-bottom:10px}
.ch-em{font-size:26px;margin-bottom:8px}
.ch-tk{font-size:11px;color:rgba(255,255,255,.6);line-height:1.4;margin-bottom:12px;min-height:32px}
.ch-done-badge{background:#4caf50;color:white;border-radius:100px;font-size:11px;font-weight:700;padding:4px 10px;display:none}
.ch-day.done .ch-done-badge{display:inline-block}
.ch-day.done .ch-btn{display:none}
.ch-btn{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:white;border-radius:8px;padding:5px 10px;font-family:var(--font);font-size:10px;font-weight:700;cursor:pointer;transition:var(--tr)}
.ch-btn:hover{background:var(--pri);border-color:var(--pri)}
.ch-footer{margin-top:0}
.ch-prog-wrap{display:flex;align-items:center;gap:16px;margin-bottom:16px}
.ch-prog-lbl{font-size:14px;font-weight:700;color:rgba(255,255,255,.8);flex-shrink:0}
.ch-prog-tr{flex:1;height:10px;background:rgba(255,255,255,.1);border-radius:5px;overflow:hidden}
.ch-prog-fl{height:100%;background:linear-gradient(90deg,var(--pri),var(--sec));border-radius:5px;transition:width .6s ease;width:0%}
.ch-prog-wrap>span{font-size:14px;font-weight:700;color:white;flex-shrink:0}
.ch-ach{font-size:16px;font-weight:700;color:var(--pri-l);text-align:center}

/* ── CERTIFICATE ── */
.cert-lay{display:grid;grid-template-columns:320px 1fr;gap:40px;align-items:start}
.cert-form h3{font-size:17px;font-weight:800;margin-bottom:20px}
.cert-doc{max-width:600px;margin:0 auto;background:white;border-radius:16px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.15);print-color-adjust:exact;-webkit-print-color-adjust:exact}
.cd-stripe-top{height:12px;background:linear-gradient(90deg,var(--pri),var(--sec),var(--acc))}
.cd-body{padding:40px;text-align:center}
.cd-icon{font-size:48px;margin-bottom:12px}
.cd-uni{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:4px}
.cd-platform{font-size:12px;color:var(--text2);margin-bottom:20px}
.cd-hr{border:none;border-top:2px solid var(--light2);margin:0 auto 20px;max-width:200px}
.cd-title{font-size:20px;font-weight:900;color:var(--text);margin-bottom:16px}
.cd-to{font-size:13px;color:var(--text2);margin-bottom:6px}
.cd-name{font-size:28px;font-weight:900;color:var(--pri);margin-bottom:8px}
.cd-info{font-size:13px;color:var(--text2);margin-bottom:16px}
.cd-text{font-size:13px;color:var(--text2);line-height:1.8;margin-bottom:24px}
.cd-foot{display:flex;align-items:center;justify-content:space-between;padding-top:16px;border-top:1px solid var(--light2)}
.cd-date,.cd-sig{font-size:12px;color:var(--text2)}
.cd-seal{font-size:32px}
.cd-stripe-bot{height:8px;background:linear-gradient(90deg,var(--acc),var(--pri))}

/* ── ABOUT ── */
.about-g{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:24px}
.ab-c h3{font-size:16px;font-weight:800;margin:12px 0 10px;color:white}
.ab-ic{font-size:36px}
.ab-c p{font-size:13px;color:rgba(255,255,255,.7);line-height:1.8}
.rl{padding-right:16px}
.rl li{font-size:13px;color:rgba(255,255,255,.7);margin-bottom:8px;line-height:1.6;border-bottom:1px dashed rgba(255,255,255,.1);padding-bottom:8px;list-style:disc}
.rl li:last-child{border-bottom:none}

/* ── FOOTER ── */
.ftr{background:var(--dark);color:var(--text-inv);padding:48px 0 0}
.ftr-top{display:flex;justify-content:space-between;align-items:flex-start;padding-bottom:40px;border-bottom:1px solid rgba(255,255,255,.1);flex-wrap:wrap;gap:32px}
.fb-logo{font-size:20px;font-weight:900;display:block;margin-bottom:8px}
.ftr-brand p{font-size:13px;color:rgba(255,255,255,.5)}
.ftr-links{display:flex;flex-wrap:wrap;gap:16px}
.ftr-links a{font-size:13px;color:rgba(255,255,255,.5);transition:var(--tr)}
.ftr-links a:hover{color:white}
.ftr-bot{padding:20px 0;text-align:center;font-size:12px;color:rgba(255,255,255,.3)}

/* ── MODAL ── */
.modal-ov{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(6px);z-index:2000;display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;visibility:hidden;transition:var(--tr)}
.modal-ov.open{opacity:1;visibility:visible}
.modal-box{background:white;border-radius:24px;max-width:600px;width:100%;max-height:86vh;overflow-y:auto;box-shadow:0 32px 100px rgba(0,0,0,.3);transform:scale(.9) translateY(20px);transition:var(--tr)}
.modal-ov.open .modal-box{transform:scale(1) translateY(0)}
.mod-hdr{padding:24px 24px 16px;border-bottom:1px solid var(--bd);display:flex;align-items:center;gap:14px;position:sticky;top:0;background:white;z-index:10;border-radius:24px 24px 0 0}
.mod-em{font-size:36px}
.mod-ttl{font-size:20px;font-weight:800;flex:1}
.mod-close{background:var(--light2);border:none;width:34px;height:34px;border-radius:8px;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:var(--tr)}
.mod-close:hover{background:#ffebee}
.mod-body{padding:24px}
.mod-sec{margin-bottom:18px}
.mod-sec h4{font-size:14px;font-weight:700;color:var(--pri);margin-bottom:8px;display:flex;align-items:center;gap:6px}
.mod-sec p,.mod-sec li{font-size:13px;color:var(--text2);line-height:1.8}
.mod-sec ol{padding-right:18px}
.mod-sec li{margin-bottom:5px;list-style:decimal}

/* ── RESPONSIVE ── */
@media(max-width:1024px){
  .side-nav{display:none}
  .cal-lay,.bmi-lay,.rm-lay,.timer-lay,.water-lay,.cert-lay,.pl-lay{grid-template-columns:1fr}
}
@media(max-width:900px){
  .desktop-nav{display:none}
  .ham-btn{display:flex}
  .ch-grid{grid-template-columns:repeat(4,1fr)}
  .cal-metrics{flex-direction:column}
}
@media(max-width:600px){
  .ideas-g{grid-template-columns:1fr}
  .q-opts{grid-template-columns:1fr}
  .ch-grid{grid-template-columns:repeat(2,1fr)}
  .tr-grid{grid-template-columns:1fr}
  .form2{grid-template-columns:1fr}
  .hero-h1{font-size:48px}
  .hs{padding:16px 20px}
  .hs b{font-size:24px}
  .goal-btns{flex-direction:column}
  .rm-lay{grid-template-columns:1fr}
}
@media print{
  body *:not(.cert-doc):not(.cert-doc *){display:none!important}
  .cert-doc{display:block!important;width:100%;max-width:none;box-shadow:none;border-radius:0}
}
</style>
</head>
<body>

<!-- LOADER -->
<div class="page-loader" id="pageLoader">
  <div class="loader-inner">
    <div class="loader-icon">
        <img src="./photo24423565914.jpg"; style="width:180px ;border-radius: 15%;"/>
    </div>
    <div class="loader-brand">رشدینو</div>
    <div class="loader-track"><div class="loader-bar" id="loaderBar"></div></div>
    <div class="loader-sub">در حال بارگذاری...</div>
  </div>
</div>

<!-- SIDE DOTS -->
<nav class="side-nav" id="sideNav">
  <a href="#hero"        class="sdot active" title="خانه"></a>
  <a href="#ideas"       class="sdot" title="ایده‌ها"></a>
  <a href="#bmi"         class="sdot" title="BMI"></a>
  <a href="#calorie"     class="sdot" title="کالری"></a>
  <a href="#roadmap"     class="sdot" title="روادمپ"></a>
  <a href="#timer"       class="sdot" title="تایمر"></a>
  <a href="#water"       class="sdot" title="آب"></a>
  <a href="#training"    class="sdot" title="آموزش"></a>
  <a href="#game"        class="sdot" title="بازی"></a>
  <a href="#planner"     class="sdot" title="برنامه"></a>
  <a href="#challenge"   class="sdot" title="چالش"></a>
  <a href="#certificate" class="sdot" title="گواهی"></a>
  <a href="#about"       class="sdot" title="درباره"></a>
</nav>

<!-- HEADER -->
<header class="hdr" id="hdr">
  <div class="hdr-inner">
    <a href="#hero" class="logo">
      <div class="logo-mark">
        <img src="./photo24423565914.jpg"; style="border-radius:10%;"/>
      </div>
      <div class="logo-text">
        <span class="lt-top"> رشدینو   <br>پلتفرم رشد دانشجو معلم </span>
        <span class="lt-bot">دانشگاه فرهنگیان</span>
      </div>
    </a>
    <nav class="desktop-nav">
      <a href="#ideas">ایده‌ها</a>
      <a href="#bmi">BMI</a>
      <a href="#calorie">کالری</a>
      <a href="#roadmap">روادمپ</a>
      <a href="#timer">تایمر</a>
      <a href="#water">آب</a>
      <a href="#game">بازی</a>
      <a href="#challenge">چالش</a>
      <a href="#certificate">گواهی</a>
    </nav>
    <button class="ham-btn" id="hamBtn">
      <span></span><span></span><span></span>
    </button>
  </div>
  <div class="mobile-menu" id="mobileMenu">
    <a href="#ideas">ایده‌ها</a><a href="#bmi">BMI</a>
    <a href="#calorie">کالری</a><a href="#roadmap">روادمپ وزن</a>
    <a href="#timer">تایمر تمرین</a><a href="#water">ردیاب آب</a>
    <a href="#training">آموزش</a><a href="#game">بازی</a>
    <a href="#planner">برنامه‌ریز</a><a href="#challenge">چالش</a>
    <a href="#certificate">گواهینامه</a><a href="#about">درباره</a>
  </div>
</header>

<!-- ── HERO ── -->
<section class="hero" id="hero">
  <canvas id="heroCanvas" class="hero-canvas"></canvas>
  <div class="hero-content">
    <div class="hero-eyebrow">ساخته شده برای جشنواره رسانه های فرهنگی _ورزشی</div>
    <h1 class="hero-h1">
      <em>رشد</em>دی <span class="h1-pro">نو</span>
    </h1>
    <p class="hero-p">جامع‌ترین پلتفرم علمی–تعاملی ورزشی برای دانشجو‌معلمان فرهنگیان<br/>با ۱۲ ابزار حرفه‌ای کاملاً رایگان</p>
    <div class="hero-chips">
      <span>⚖️ BMI هوشمند</span><span>🔥 محاسبه کالری</span>
      <span>🗺️ روادمپ وزن</span><span>⏱ تایمر HIIT</span>
      <span>💧 ردیاب آب</span><span>🏅 گواهی دیجیتال</span>
      <span>💡 ۳۰+ ایده</span><span>🎮 کوییز علمی</span>
    </div>
    <div class="hero-cta-row">
      <a href="hy.htm" target="_blank" class="cta-outline">فرم اطلاعات طراح</a>
      <a href="#bmi" class="cta-main">شروع کن </a>
      <a href="#ideas" class="cta-outline">کشف ایده‌ها</a>
<a href="کشتی.htm" target="_blank" class="cta-main">ورزش کشتی و فواید آن برای دانشجو معلم</a>
    </div>
  </div>
  <div class="hero-stats-bar">
    <div class="hs"><b class="hs-n" data-to="30">0</b><small>ایده ورزشی</small></div>
    <div class="hs-div"></div>
    <div class="hs"><b class="hs-n" data-to="12">0</b><small>ابزار تعاملی</small></div>
    <div class="hs-div"></div>
    <div class="hs"><b class="hs-n" data-to="10">0</b><small>سؤال کوییز</small></div>
    <div class="hs-div"></div>
    <div class="hs"><b class="hs-n" data-to="7">0</b><small>روز چالش</small></div>
  </div>
</section>

<!-- ── IDEAS ── -->
<section id="ideas" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>01</b> بانک ایده‌ها</div><h2>ایده‌های خلاق ورزشی</h2><p>فیلتر و جستجو کنید</p></div>
    <div class="filter-row" id="filterRow">
      <button class="fb active" data-f="all">همه</button>
      <button class="fb" data-f="cardio">🏃 هوازی</button>
      <button class="fb" data-f="strength">💪 قدرتی</button>
      <button class="fb" data-f="stretch">🤸 کششی</button>
      <button class="fb" data-f="group">👥 گروهی</button>
      <button class="fb" data-f="dorm">🏠 خوابگاه</button>
      <button class="fb" data-f="mindful">🧘 ذهن‌آگاهی</button>
    </div>
    <div class="search-box">
      <input id="searchIn" type="text" placeholder="جستجو در ایده‌ها..." class="sinp"/>
      <span>🔍</span>
    </div>
    <div class="ideas-g" id="ideasGrid"></div>
  </div>
</section>

<!-- ── BMI ── -->
<section id="bmi" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>02</b> BMI</div><h2>محاسبه شاخص توده بدنی</h2><p>Body Mass Index – شاخص علمی وضعیت وزن شما</p></div>
    <div class="bmi-lay">
      <div class="bmi-form glass-c">
        <h3>اطلاعات شما</h3>
        <div class="ig"><label>جنسیت</label>
          <div class="gen-toggle">
            <button class="gb active" id="genM" onclick="setGender('m')">👨 مرد</button>
            <button class="gb" id="genF" onclick="setGender('f')">👩 زن</button>
          </div>
        </div>
        <div class="ig"><label>سن — <span id="bmiAgeV">22</span> سال</label>
          <input type="range" id="bmiAge" min="15" max="60" value="22" class="sld" oninput="updateBMI()"/></div>
        <div class="ig"><label>قد — <span id="bmiHV">170</span> سانتی‌متر</label>
          <input type="range" id="bmiH" min="140" max="210" value="170" class="sld" oninput="updateBMI()"/></div>
        <div class="ig"><label>وزن — <span id="bmiWV">70</span> کیلوگرم</label>
          <input type="range" id="bmiW" min="40" max="150" value="70" class="sld" oninput="updateBMI()"/></div>
      </div>
      <div class="bmi-res glass-c">
        <div class="gauge-wrap">
          <svg viewBox="0 0 200 120" class="gauge-svg">
            <defs>
              <linearGradient id="gg" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%"   stop-color="#42a5f5"/>
                <stop offset="30%"  stop-color="#66bb6a"/>
                <stop offset="65%"  stop-color="#ffa726"/>
                <stop offset="100%" stop-color="#ef5350"/>
              </linearGradient>
            </defs>
            <path d="M20 100 A80 80 0 0 1 180 100" fill="none" stroke="rgba(255,255,255,.12)" stroke-width="14" stroke-linecap="round"/>
            <path d="M20 100 A80 80 0 0 1 180 100" fill="none" stroke="url(#gg)" stroke-width="14" stroke-linecap="round"/>
            <line id="gNeedle" x1="100" y1="98" x2="100" y2="30" stroke="white" stroke-width="3" stroke-linecap="round" transform="rotate(0 100 100)"/>
            <circle cx="100" cy="100" r="7" fill="white"/>
          </svg>
          <div class="gauge-val"><span id="bmiVal">24.2</span><small>BMI</small></div>
        </div>
        <div class="bmi-badge" id="bmiBadge">✅ وزن طبیعی</div>
        <div class="bmi-scale">
          <div class="bs-item" style="--c:#42a5f5">کم‌وزن<br/><small>&lt;18.5</small></div>
          <div class="bs-item" style="--c:#66bb6a">طبیعی<br/><small>18.5–24.9</small></div>
          <div class="bs-item" style="--c:#ffa726">اضافه‌وزن<br/><small>25–29.9</small></div>
          <div class="bs-item" style="--c:#ef5350">چاقی<br/><small>≥30</small></div>
        </div>
        <div class="bmi-advice-box" id="bmiAdvice"></div>
        <div class="bmi-ideal" id="bmiIdeal"></div>
      </div>
    </div>
  </div>
</section>

<!-- ── CALORIE ── -->
<section id="calorie" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>03</b> کالری‌سنج</div><h2>محاسبه کالری روزانه</h2><p>فرمول علمی Mifflin-St Jeor — BMR و TDEE</p></div>
    <div class="cal-lay">
      <div class="cal-form card">
        <h3>🔬 اطلاعات متابولیک</h3>
        <div class="form2">
          <div class="fi"><label>سن</label><input type="number" id="cAge" value="22" min="15" max="70" class="inp"/></div>
          <div class="fi"><label>قد (cm)</label><input type="number" id="cH" value="170" min="140" max="210" class="inp"/></div>
          <div class="fi"><label>وزن (kg)</label><input type="number" id="cW" value="70" min="30" max="200" class="inp"/></div>
          <div class="fi"><label>جنسیت</label>
            <select id="cGen" class="inp">
              <option value="m">مرد</option><option value="f">زن</option>
            </select>
          </div>
        </div>
        <div class="fi full"><label>سطح فعالیت</label>
          <select id="cAct" class="inp">
            <option value="1.2">کم‌تحرک (بدون ورزش)</option>
            <option value="1.375">کم‌فعال (۱–۳ روز)</option>
            <option value="1.55" selected>متوسط (۳–۵ روز)</option>
            <option value="1.725">پرفعال (۶–۷ روز)</option>
            <option value="1.9">خیلی فعال (دو بار روزانه)</option>
          </select>
        </div>
        <div class="fi full"><label>هدف</label>
          <div class="goal-btns">
            <button class="gb2 active" data-g="-500" id="gLose" onclick="setGoal(this,-500)">⬇️ کاهش وزن</button>
            <button class="gb2" data-g="0" id="gKeep" onclick="setGoal(this,0)">↔️ حفظ وزن</button>
            <button class="gb2" data-g="500" id="gGain" onclick="setGoal(this,500)">⬆️ افزایش وزن</button>
          </div>
        </div>
        <button class="btn-p" onclick="calcCal()">محاسبه کالری 🔥</button>
      </div>
      <div class="cal-res card" id="calRes" style="display:none">
        <h3>📊 نتایج شما</h3>
        <div class="cal-metrics">
          <div class="cm"><div class="cm-ic">🫀</div><div class="cm-v" id="vBMR">0</div><div class="cm-l">BMR<br/><small>متابولیسم پایه</small></div></div>
          <div class="cm hi"><div class="cm-ic">🔥</div><div class="cm-v" id="vTDEE">0</div><div class="cm-l">TDEE<br/><small>نیاز روزانه</small></div></div>
          <div class="cm"><div class="cm-ic">🎯</div><div class="cm-v" id="vGoal">0</div><div class="cm-l">هدف<br/><small>کالری مصرفی</small></div></div>
        </div>
        <div id="macroWrap"></div>
        <div id="foodEq"></div>
      </div>
    </div>
  </div>
</section>

<!-- ── ROADMAP ── -->
<section id="roadmap" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>04</b> روادمپ</div><h2>نقشه راه هوشمند وزن</h2><p>برنامه علمی گام‌به‌گام برای رسیدن به وزن ایده‌آل</p></div>
    <div class="rm-lay">
      <div class="rm-form glass-c">
        <h3>🎯 تنظیم اهداف</h3>
        <div class="ig"><label>وزن فعلی (kg)</label><input type="number" id="rmCur" value="80" class="gi"/></div>
        <div class="ig"><label>وزن هدف (kg)</label><input type="number" id="rmTar" value="70" class="gi"/></div>
        <div class="ig"><label>مدت (هفته)</label><input type="number" id="rmWks" value="12" min="4" max="52" class="gi"/></div>
        <div class="ig"><label>سطح فعالیت</label>
          <select id="rmAct" class="gi">
            <option value="1.2">کم‌تحرک</option>
            <option value="1.375">کم‌فعال</option>
            <option value="1.55" selected>متوسط</option>
            <option value="1.725">پرفعال</option>
          </select>
        </div>
        <button class="btn-glow" onclick="makeRoadmap()">🗺️ ساخت نقشه راه</button>
      </div>
      <div class="rm-res glass-c" id="rmRes" style="display:none">
        <div id="rmSumm"></div>
        <div id="rmPhase"></div>
        <div id="rmTips"></div>
      </div>
    </div>
  </div>
</section>

<!-- ── TIMER ── -->
<section id="timer" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>05</b> تایمر</div><h2>تایمر تمرین HIIT</h2><p>مدیریت حرفه‌ای کار و استراحت</p></div>
    <div class="timer-lay">
      <div class="timer-cfg card">
        <h3>⚙️ تنظیمات</h3>
        <div class="presets">
          <button class="pre" onclick="applyPre(20,10,8)">تاباتا<br/><small>20/10×8</small></button>
          <button class="pre" onclick="applyPre(30,15,6)">متوسط<br/><small>30/15×6</small></button>
          <button class="pre" onclick="applyPre(45,15,5)">پیشرفته<br/><small>45/15×5</small></button>
          <button class="pre" onclick="applyPre(60,20,4)">قدرتی<br/><small>60/20×4</small></button>
        </div>
        <div class="form2">
          <div class="fi"><label>کار (ثانیه)</label><input type="number" id="tWork" value="20" min="5" max="120" class="inp"/></div>
          <div class="fi"><label>استراحت (ثانیه)</label><input type="number" id="tRest" value="10" min="5" max="120" class="inp"/></div>
          <div class="fi"><label>تعداد راند</label><input type="number" id="tRnd" value="8" min="1" max="30" class="inp"/></div>
        </div>
        <div class="ex-section">
          <h4>🏋️ لیست تمرینات</h4>
          <div class="ex-add"><input type="text" id="exIn" placeholder="اضافه کردن تمرین..." class="inp"/><button onclick="addEx()" class="btn-sm">+</button></div>
          <div id="exList" class="ex-chips"></div>
        </div>
      </div>
      <div class="timer-disp card">
        <div class="t-phase" id="tPhase">آماده</div>
        <div class="t-ring-wrap">
          <svg viewBox="0 0 200 200" class="t-svg">
            <circle cx="100" cy="100" r="85" fill="none" stroke="var(--bd)" stroke-width="10"/>
            <circle id="tRing" cx="100" cy="100" r="85" fill="none" stroke="var(--pri)" stroke-width="10"
              stroke-dasharray="534" stroke-dashoffset="0" stroke-linecap="round" transform="rotate(-90 100 100)"/>
          </svg>
          <div class="t-inner">
            <div class="t-num" id="tNum">00</div>
            <div class="t-sub" id="tSub">راند 0/0</div>
          </div>
        </div>
        <div class="t-ctrl">
          <button class="tc" id="tStartBtn" onclick="tStart()">▶</button>
          <button class="tc" onclick="tPause()">⏸</button>
          <button class="tc" onclick="tReset()">↺</button>
        </div>
        <div class="t-info">
          <div><span id="tElapsed">0:00</span><small>گذشته</small></div>
          <div><span id="tCal">0</span><small>کالری</small></div>
          <div><span id="tExNow">—</span><small>تمرین</small></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ── WATER ── -->
<section id="water" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>06</b> آب</div><h2>ردیاب هیدراتاسیون</h2><p>نوشیدن آب کافی برای عملکرد ورزشی بهینه</p></div>
    <div class="water-lay">
      <div class="water-vis glass-c">
        <div class="wbottle" id="wBottle">
          <div class="w-fill" id="wFill" style="height:0%"></div>
          <div class="w-marks"><span>100%</span><span>75%</span><span>50%</span><span>25%</span></div>
        </div>
        <div class="w-pct" id="wPct">0%</div>
        <div class="w-ml" id="wMl">0 / 2500 ml</div>
        <div class="w-emoji" id="wEmoji">😴</div>
      </div>
      <div class="water-ctrl glass-c">
        <h3>💧 افزودن آب</h3>
        <div class="w-calc"><input type="number" id="wKg" value="70" class="gi" placeholder="وزن (kg)"/><button onclick="calcWater()" class="btn-glow-sm">محاسبه نیاز</button></div>
        <div class="w-need" id="wNeed"></div>
        <div class="w-btns">
          <button class="wadd" onclick="addW(150)"><span>☕</span>150 ml</button>
          <button class="wadd" onclick="addW(250)"><span>🥤</span>250 ml</button>
          <button class="wadd" onclick="addW(330)"><span>🧃</span>330 ml</button>
          <button class="wadd" onclick="addW(500)"><span>🍶</span>500 ml</button>
        </div>
        <div class="w-custom"><input type="number" id="wCustom" placeholder="مقدار دلخواه (ml)" class="gi"/><button onclick="addCustomW()" class="btn-glow-sm">+</button></div>
        <button onclick="resetW()" class="btn-ghost-sm" style="margin-top:12px">↺ ریست روزانه</button>
        <div class="w-log" id="wLog"></div>
      </div>
    </div>
  </div>
</section>

<!-- ── TRAINING ── -->
<section id="training" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>07</b> آموزش</div><h2>آموزش اصولی ورزش‌ها</h2><p>راهنمای علمی گام‌به‌گام</p></div>
    <div class="tr-tabs">
      <button class="tt active" data-t="fitness">آمادگی جسمانی</button>
      <button class="tt" data-t="corrective">اصلاحی</button>
      <button class="tt" data-t="stretch">کشش</button>
      <button class="tt" data-t="dorm">خوابگاه</button>
    </div>
    <div class="tr-grid" id="trGrid"></div>
  </div>
</section>

<!-- ── GAME ── -->
<section id="game" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>08</b> بازی</div><h2>کوییز ورزشی حرفه‌ای</h2><p>دانش علمی خود را بسنجید</p></div>
    <div class="game-wrap">
      <div class="game-start glass-c" id="gStart">
        <div class="gt">🏆</div>
        <h3>کوییز دانش تربیت بدنی</h3>
        <p>۱۰ سؤال علمی | تایمر ۱۵ ثانیه | امتیازدهی زنده</p>
        <div class="g-chips"><span>⏱ 15s/سؤال</span><span>⭐ امتیاز+سرعت</span><span>🏅 مدال نهایی</span></div>
        <button class="btn-glow" onclick="startG()">شروع بازی !</button>
      </div>
      <div class="game-play hidden glass-c" id="gPlay">
        <div class="g-hdr">
          <div class="g-sc">امتیاز: <strong id="gSc">0</strong></div>
          <div class="g-qn">سؤال <span id="gQn">1</span>/10</div>
          <div class="g-tr">
            <div class="g-tr-ring"><div class="g-tr-fill" id="gTrFill"></div></div>
            <span id="gTrN">15</span>
          </div>
        </div>
        <div class="q-bar"><div class="q-bar-fill" id="qBarFill"></div></div>
        <p class="q-txt" id="qTxt"></p>
        <div class="q-opts" id="qOpts"></div>
        <div class="q-exp hidden" id="qExp"></div>
      </div>
      <div class="game-res hidden glass-c" id="gRes">
        <div class="rm" id="rMedal">🥇</div>
        <h3 id="rTitle"></h3>
        <div class="r-score" id="rScore"></div>
        <p id="rMsg"></p>
        <div class="r-stats" id="rStats"></div>
        <button class="btn-glow" onclick="restartG()">بازی مجدد</button>
        <button class="btn-ghost2" onclick="showGStart()">خروج</button>
      </div>
    </div>
  </div>
</section>

<!-- ── PLANNER ── -->
<section id="planner" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>09</b> برنامه‌ریز</div><h2>برنامه‌ریز هفتگی دانشجو</h2><p>تعادل علمی میان مطالعه، ورزش و استراحت</p></div>
    <div class="pl-lay">
      <div class="pl-form card">
        <h3>➕ افزودن روز</h3>
        <div class="fi full"><label>روز</label><select id="plDay" class="inp"><option>شنبه</option><option>یکشنبه</option><option>دوشنبه</option><option>سه‌شنبه</option><option>چهارشنبه</option><option>پنج‌شنبه</option><option>جمعه</option></select></div>
        <div class="fi full"><label>مطالعه (ساعت)</label><input type="number" id="plStudy" value="4" min="0" max="16" class="inp"/></div>
        <div class="fi full"><label>ورزش (دقیقه)</label><input type="number" id="plSport" value="30" min="0" max="180" class="inp"/></div>
        <div class="fi full"><label>استراحت (ساعت)</label><input type="number" id="plRest" value="8" min="0" max="12" class="inp"/></div>
        <button class="btn-p" onclick="addPlan()">افزودن</button>
        <button class="btn-ghost-dark" onclick="clearPlan()" style="margin-top:8px">پاک کردن</button>
      </div>
      <div class="pl-right">
        <div class="bal-box" id="balBox" style="display:none"></div>
        <div class="tbl-wrap">
          <table class="ptbl">
            <thead><tr><th>روز</th><th>مطالعه</th><th>ورزش</th><th>استراحت</th><th>وضعیت</th><th>×</th></tr></thead>
            <tbody id="plBody"></tbody>
          </table>
          <p class="empty-msg" id="plEmpty">هنوز برنامه‌ای ثبت نشده.</p>
        </div>
        <div id="weekChart" style="display:none">
          <h4 style="margin:20px 0 10px;font-size:15px">📊 نمودار هفتگی</h4>
          <canvas id="wChart" height="100"></canvas>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ── CHALLENGE ── -->
<section id="challenge" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>10</b> چالش</div><h2>چالش ۷ روزه نشاط</h2><p>هر روز یک قدم کوچک – یک تغییر بزرگ</p></div>
    <div class="ch-grid" id="chGrid"></div>
    <div class="ch-footer glass-c">
      <div class="ch-prog-wrap">
        <div class="ch-prog-lbl">پیشرفت هفته</div>
        <div class="ch-prog-tr"><div class="ch-prog-fl" id="chFl"></div></div>
        <span id="chPct">0%</span>
      </div>
      <div class="ch-ach" id="chAch"></div>
    </div>
  </div>
</section>

<!-- ── CERTIFICATE ── -->
<section id="certificate" class="sec">
  <div class="con">
    <div class="sh"><div class="sbadge"><b>11</b> گواهینامه</div><h2>گواهینامه دیجیتال</h2><p>گواهی شخصی قابل چاپ پس از تکمیل چالش</p></div>
    <div class="cert-lay">
      <div class="cert-form card">
        <h3>✍️ اطلاعات گواهی</h3>
        <div class="fi full"><label>نام و نام‌خانوادگی</label><input type="text" id="ceName" placeholder="مثال: علی محمدی" class="inp"/></div>
        <div class="fi full"><label>رشته تحصیلی</label><input type="text" id="ceMajor" placeholder="مثال: تربیت بدنی" class="inp"/></div>
        <div class="fi full"><label>استان</label><input type="text" id="ceProv" placeholder="مثال: تهران" class="inp"/></div>
        <button class="btn-p" onclick="makeCert()">🏅 دریافت گواهینامه</button>
      </div>
      <div class="cert-prev" id="certPrev" style="display:none">
        <div class="cert-doc" id="certDoc">
          <div class="cd-stripe-top"></div>
          <div class="cd-body">
            <div class="cd-icon">
              <img src="./download (2).png"; style="width:80PX;"/>
            </div>
            <div class="cd-uni">دانشگاه فرهنگیان جمهوری اسلامی ایران</div>
            <div class="cd-platform">Rushdino platform</div>
            <hr class="cd-hr"/>
            <div class="cd-title">گواهینامه تکمیل چالش ورزشی</div>
            <div class="cd-to">این گواهینامه به</div>
            <div class="cd-name" id="cdName"></div>
            <div class="cd-info">دانشجو‌معلم رشته <span id="cdMajor"></span> – استان <span id="cdProv"></span></div>
            <div class="cd-text">به‌خاطر تکمیل موفقیت‌آمیز چالش ۷ روزه نشاط دانشجو‌معلم<br/>در پلتفرم رشدینو دانشگاه فرهنگیان اعطا می‌گردد.</div>
            <div class="cd-foot">
              <div class="cd-date" id="cdDate"></div>
              <div class="cd-seal">🏆</div>
              <div class="cd-sig">امضای دیجیتال</div>
            </div>
          </div>
          <div class="cd-stripe-bot"></div>
        </div>
        <button class="btn-p" onclick="printCert()" style="margin-top:20px">🖨️ چاپ / دانلود PDF</button>
      </div>
    </div>
  </div>
</section>

<!-- ── ABOUT ── -->
<section id="about" class="sec s-dark">
  <div class="con">
    <div class="sh light"><div class="sbadge light"><b>12</b> درباره</div><h2>درباره پروژه</h2><p>رسالت علمی و مبانی تخصصی</p></div>
    <div class="about-g">
      <div class="ab-c glass-c"><div class="ab-ic">🎓</div><h3>رسالت فرهنگیان</h3><p>دانشگاه فرهنگیان با هدف تربیت معلمان متعهد و توانمند، بر پرورش همه‌جانبه تأکید دارد. سلامت جسمی و روانی از ارکان اساسی این رسالت است. معلمی که خود سالم باشد، الگوی نسل آینده خواهد بود.</p></div>
      <div class="ab-c glass-c"><div class="ab-ic">🔬</div><h3>مبانی علمی</h3><ul class="rl"><li>WHO Physical Activity Guidelines (2020)</li><li>ACSM Exercise Guidelines (10th Ed.)</li><li>Mifflin-St Jeor BMR Formula (1990)</li><li>Ratey, J.J. – Spark: Brain & Exercise</li><li>استانداردهای وزارت آموزش‌وپرورش ایران</li><li>مجله علوم ورزشی دانشگاه تهران</li></ul></div>
      <div class="ab-c glass-c"><div class="ab-ic">⚡</div><h3>نوآوری‌های پلتفرم</h3><ul class="rl"><li>BMI با گیج تعاملی انیمیشنی</li><li>TDEE/BMR با Mifflin-St Jeor</li><li>روادمپ هوشمند فازبندی‌شده</li><li>تایمر HIIT با لیست تمرین</li><li>ردیاب آب روزانه با LocalStorage</li><li>گواهینامه دیجیتال قابل چاپ</li></ul></div>
      <div class="ab-c glass-c"><div class="ab-ic">🌟</div><h3>مشخصات طراح</h3><p>طراح: دانشجو‌معلم علیرضا امجدیان<br/>رشته:امور تربیتی – دانشگاه فرهنگیان<br/>جشنواره: رسانه‌های فرهنگی–ورزشی<br/>سال: 1404_1405</p><p style="margin-top:12px;font-size:12px;opacity:.6">فناوری: HTML5 + CSS3 + Vanilla JS | بدون بک‌اند</p></div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="ftr">
  <div class="con">
    <div class="ftr-top">
        <div><img src="./download.png"; style="width:100px;border-radius: 25%;"/> </div>
      <div class="ftr-brand"><span class="fb-logo">رشدینو</span><p>پلتفرم آموزشی–ورزشی دانشگاه فرهنگیان ایران</p></div>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400" width="100" height="100">
  <defs>
    <radialGradient id="bg" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#122535"/>
      <stop offset="100%" stop-color="#060e15"/>
    </radialGradient>
    <linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#00e5ff"/>
      <stop offset="100%" stop-color="#0090cc"/>
    </linearGradient>
    <linearGradient id="g2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#00e5ff"/>
      <stop offset="100%" stop-color="#00ff88"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <circle cx="200" cy="200" r="200" fill="url(#bg)"/>

  <!-- Hexagon -->
  <polygon points="200,105 260,140 260,210 200,245 140,210 140,140"
           fill="rgba(0,229,255,0.05)"
           stroke="url(#g1)"
           stroke-width="2"/>

  <!-- Main Icon -->
  <circle cx="215" cy="140" r="12" fill="url(#g1)"/>
  <path d="M215 152 Q210 168 205 182"
        stroke="url(#g1)" stroke-width="6"
        stroke-linecap="round" fill="none"/>
  <path d="M210 160 Q195 150 185 140"
        stroke="url(#g2)" stroke-width="5"
        stroke-linecap="round" fill="none"/>
  <path d="M205 182 Q215 198 220 210"
        stroke="url(#g1)" stroke-width="5"
        stroke-linecap="round" fill="none"/>
  <path d="M205 182 Q190 198 185 210"
        stroke="url(#g2)" stroke-width="5"
        stroke-linecap="round" fill="none"/>

  <!-- Divider -->
  <line x1="120" y1="270" x2="280" y2="270"
        stroke="url(#g1)" stroke-width="1" opacity="0.4"/>

  <!-- Text -->
  <text x="200" y="310"
        font-family="Vazirmatn,Tahoma,sans-serif"
        font-size="36"
        font-weight="800"
        text-anchor="middle"
        fill="url(#g1)">رشدینو</text>

  <text x="200" y="335"
        font-family="Arial,sans-serif"
        font-size="10"
        text-anchor="middle"
        fill="rgba(0,229,255,0.6)"
        letter-spacing="2">ROSHDINO</text>
</svg>
      
      
      <div class="ftr-links">
        <a href="#bmi">BMI</a><a href="#calorie">کالری</a><a href="#roadmap">روادمپ</a>
        <a href="#timer">تایمر</a><a href="#water">آب</a><a href="#game">بازی</a>
        <a href="#challenge">چالش</a><a href="#certificate">گواهی</a>
      </div>
    </div>
    <div class="ftr-bot">© ۱۴۰۴  رشدینو | دانشگاه فرهنگیان ایران | طراحی شده  برای آینده آموزش</div>
    <div class="ftr-bot"; style="font-weight:bolder;">© ۱۴۰۴  رشدینو | دانشگاه فرهنگیان ایران | برنامه نویسی شده توسط: علیرضا امجدیان</div>
  
</div>
</footer>

<!-- MODAL -->
<div class="modal-ov" id="mOv" onclick="closeMod(event)">
  <div class="modal-box" id="mBox"></div>
</div>

<script>
    /**
 * SportEdu Pro — app.js
 * دانشگاه فرهنگیان | Premium Interactive Platform
 */

/* ====================== DATA ====================== */
const IDEAS = [
  {id:1,emoji:"🏃",title:"دو آهسته ۳۰ دقیقه‌ای",cat:"cardio",catL:"هوازی",dur:"۳۰ دقیقه",ppl:"۱+",goal:"استقامت قلبی",desc:"دویدن آهسته با شدت متوسط برای بهبود ظرفیت هوازی و سلامت قلب.",edu:"توسعه VO₂max، بهبود سیستم تنفسی، کاهش ریسک بیماری قلبی",phys:"کاهش چربی، تقویت پایین‌تنه، استقامت",psych:"اندورفین، کاهش استرس، بهبود خلق",steps:["گرم‌کردن ۵ دقیقه پیاده‌روی سریع","دویدن با سرعت آهسته (۶–۸ km/h)","حفظ تنفس منظم (۳ قدم دم، ۲ قدم بازدم)","کاهش تدریجی سرعت ۵ دقیقه پایانی","کشش عضلات"],safety:"در صورت درد قفسه سینه یا سرگیجه متوقف شوید.",bg:"#e3f2fd",ac:"#1565c0"},
  {id:2,emoji:"💪",title:"تمرین با وزن بدن",cat:"strength",catL:"قدرتی",dur:"۴۵ دقیقه",ppl:"۱–۱۰",goal:"قدرت عضلانی",desc:"تمرین با وزن بدن که نیاز به تجهیزات ندارد و در هر فضایی قابل اجراست.",edu:"ثبات مرکزی (Core Stability)، قدرت عملکردی",phys:"توده عضلانی، سیستم اسکلتی–عضلانی",psych:"اعتماد به نفس، احساس توانمندی",steps:["اسکوات ۳×۱۵","پوش‌آپ ۳×۱۰","پلانک ۳×۳۰ثانیه","لانژ ۳×۱۰ هر پا","کشش ۱۰ دقیقه"],safety:"تکنیک صحیح را قبل از افزایش شدت بیاموزید.",bg:"#fce4ec",ac:"#c62828"},
  {id:3,emoji:"🧘",title:"یوگا آرام‌بخش",cat:"mindful",catL:"ذهن‌آگاهی",dur:"۲۰ دقیقه",ppl:"هر تعداد",goal:"کاهش استرس",desc:"تمرین یوگا با تمرکز بر تنفس، ایده‌آل برای دوره‌های امتحانی.",edu:"یکپارچگی ذهن–جسم، تنفس دیافراگمی، Mindfulness",phys:"انعطاف، تعادل، تنش‌زدایی",psych:"کاهش کورتیزول، بهبود تمرکز",steps:["نشستن آرام و تمرکز روی تنفس","Child's Pose – ۱ دقیقه","Cat-Cow – ۱۰ تکرار","Downward Dog – ۳۰ ثانیه","Savasana – ۵ دقیقه"],safety:"از حرکاتی که درد ایجاد می‌کنند بپرهیزید.",bg:"#e8f5e9",ac:"#2e7d32"},
  {id:4,emoji:"⚽",title:"فوتسال دانشجویی",cat:"group",catL:"گروهی",dur:"۶۰ دقیقه",ppl:"۱۰–۱۲",goal:"روحیه تیمی",desc:"فوتسال علاوه بر آمادگی جسمانی، تعاون، رهبری و تصمیم‌گیری سریع را تقویت می‌کند.",edu:"بازی تیمی، حل مسئله، تاکتیک",phys:"استقامت، سرعت، چابکی، هماهنگی",psych:"شادی، روحیه گروهی، کاهش تنهایی",steps:["تقسیم به دو تیم ۵ نفره","گرم‌کردن با پاس‌کاری ۱۰ دقیقه","۲ نیمه ۲۵ دقیقه‌ای","استراحت ۵ دقیقه","جمع‌بندی"],safety:"از کفش مناسب استفاده کنید. ناخن‌ها کوتاه باشند.",bg:"#fff9c4",ac:"#f57f17"},
  {id:5,emoji:"🏠",title:"HIIT در خوابگاه",cat:"dorm",catL:"خوابگاه",dur:"۲۰ دقیقه",ppl:"۱–۳",goal:"تناسب اندام",desc:"تمرین تناوبی پرشدت بدون تجهیزات، قابل اجرا در اتاق خوابگاه.",edu:"HIIT، اثر EPOC، متابولیسم پایه",phys:"سوزاندن چربی، آمادگی جسمانی سریع",psych:"انرژی، دستاورد سریع",steps:["۳۰ثانیه جامپینگ جک + ۱۵ثانیه استراحت","۳۰ثانیه پوش‌آپ + ۱۵ثانیه استراحت","۳۰ثانیه اسکوات + ۱۵ثانیه استراحت","۸ دور تکرار"],safety:"در ساعات سکوت از پریدن خودداری کنید.",bg:"#f3e5f5",ac:"#6a1b9a"},
  {id:6,emoji:"🤸",title:"کشش پویای صبحگاهی",cat:"stretch",catL:"کششی",dur:"۱۵ دقیقه",ppl:"هر تعداد",goal:"انعطاف‌پذیری",desc:"روتین کشش پویا برای شروع روز با انرژی و پیشگیری از آسیب.",edu:"رفلکس کشش، دامنه حرکتی مفصل",phys:"انعطاف، پیشگیری از آسیب",psych:"آرام‌بخشی، ذهن‌آگاهی",steps:["چرخش گردن ۳۰ثانیه","لانژ پویا ۱۰×۲","چرخش تنه ۱۰ تکرار","کشش همسترینگ ۳۰ثانیه هر پا","هیپ سرکل ۱۰×۲"],safety:"کشش ایستا را بعد از گرم شدن انجام دهید.",bg:"#e1f5fe",ac:"#0277bd"},
  {id:7,emoji:"🏊",title:"شنا در استخر",cat:"cardio",catL:"هوازی",dur:"۴۵ دقیقه",ppl:"۱+",goal:"تقویت کل بدن",desc:"شنا کامل‌ترین ورزش برای قدرت، استقامت و انعطاف بدون فشار مفصلی.",edu:"ظرفیت تنفسی، مقاومت آب",phys:"تمام گروه‌های عضلانی بدون فشار مفاصل",psych:"آرامش، کاهش اضطراب",steps:["گرم‌کردن ۵ دقیقه کنار استخر","شنای آزاد ۵۰۰ متر","تخته شنا ۲×۲۵","سرد کردن ۵ دقیقه"],safety:"هرگز تنها شنا نکنید. به ناجی غریق توجه کنید.",bg:"#e3f2fd",ac:"#1565c0"},
  {id:8,emoji:"🎾",title:"بدمینتون دو نفره",cat:"group",catL:"گروهی",dur:"۳۰ دقیقه",ppl:"۲–۴",goal:"هماهنگی دست–چشم",desc:"بدمینتون سرعت، چابکی و هماهنگی را در قالب بازی لذت‌بخش ارائه می‌دهد.",edu:"زمان واکنش، هماهنگی چشم–دست",phys:"چابکی، سرعت، هوازی متوسط",psych:"رقابت سالم، اجتماعی‌شدن",steps:["انتخاب زمین مناسب","گرم‌کردن با رالی آزاد","بازی ست‌های ۱۱ امتیازی","تغییر نفرات هر ست"],safety:"مراقب تصادم با همبازی باشید.",bg:"#fff9c4",ac:"#f57f17"},
  {id:9,emoji:"🧠",title:"مدیتیشن تمرکزی",cat:"mindful",catL:"ذهن‌آگاهی",dur:"۱۰ دقیقه",ppl:"هر تعداد",goal:"تمرکز قبل مطالعه",desc:"مدیتیشن کوتاه تنفسی قبل از مطالعه، تمرکز و کارایی را افزایش می‌دهد.",edu:"نوروپلاستیسیتی، شبکه پیش‌فرض مغز",phys:"کاهش فشار خون، تنظیم ضربان قلب",psych:"کاهش استرس، تمرکز، بهبود حافظه",steps:["نشستن آرام با کمر صاف","بستن چشم‌ها","تنفس ۴–۴–۴ (دم، نگه‌داری، بازدم)","هر بار که ذهن منحرف شد بازگردید","کشش ملایم در پایان"],safety:"در صورت ناراحتی ذهنی با متخصص مشورت کنید.",bg:"#e8f5e9",ac:"#2e7d32"},
  {id:10,emoji:"🏋️",title:"باند مقاومتی",cat:"strength",catL:"قدرتی",dur:"۳۵ دقیقه",ppl:"۱–۵",goal:"قدرت با ابزار ارزان",desc:"باند مقاومتی ابزاری سبک و ارزان برای طیف گسترده تمرینات قدرتی.",edu:"مقاومت ارتجاعی، اضافه‌بار تدریجی",phys:"تقویت دست، پشت و پا",psych:"قابل اجرا هر جا، اعتماد به نفس",steps:["انتخاب باند مناسب","کرل بازو ۳×۱۵","ردیف پشت ۳×۱۲","اسکوات با باند ۳×۱۵","کشش پایانی"],safety:"باند را قبل از استفاده بررسی کنید.",bg:"#fce4ec",ac:"#c62828"},
  {id:11,emoji:"🚶",title:"پیاده‌روی بین کلاس",cat:"dorm",catL:"خوابگاه",dur:"۱۰–۱۵ دقیقه",ppl:"هر تعداد",goal:"فعالیت در میان روز",desc:"استفاده از وقفه‌های بین کلاس برای پیاده‌روی تند.",edu:"NEAT، انرژی‌زایی غیرورزشی",phys:"کالری‌سوزی، گردش خون",psych:"ذهن هوشیار، کاهش خستگی",steps:["پله به جای آسانسور","مسیر طولانی‌تر","سرعت بیشتر از معمول","موسیقی انرژی‌زا"],safety:"مراقب ترافیک باشید.",bg:"#f3e5f5",ac:"#6a1b9a"},
  {id:12,emoji:"🤾",title:"هندبال ۳ در ۳",cat:"group",catL:"گروهی",dur:"۴۰ دقیقه",ppl:"۶",goal:"مهارت پرتاب",desc:"هندبال ۳ در برابر ۳ – تمرین مهارت، سرعت تصمیم‌گیری و کار گروهی.",edu:"تاکتیک هجومی–دفاعی، مهارت‌های پایه",phys:"انفجاری، قدرت پرتاب، سرعت",psych:"تیم‌سازی، رهبری، انگیزه",steps:["دو تیم سه‌نفره","گرم‌کردن پاس‌کاری","بازی نیمه زمین","تناوب بازیکن هر ۵ دقیقه"],safety:"دستکش برای حفاظت انگشتان توصیه می‌شود.",bg:"#fff9c4",ac:"#f57f17"}
];

const TRAINING_DATA = {
  fitness:[
    {icon:"❤️",title:"تمرین هوازی پایه (۴ هفته)",desc:"برنامه تدریجی برای بهبود استقامت قلبی",steps:["هفته ۱–۲: پیاده‌روی ۳۰ دقیقه روزانه","هفته ۳: تناوب ۵ دقیقه دویدن/پیاده‌روی","هفته ۴: دویدن ۲۰ دقیقه پیوسته"],safety:"ضربان هدف: ۶۰–۷۰٪ ماکزیمم (۲۲۰ – سن)"},
    {icon:"⚡",title:"برنامه HIIT تاباتا",desc:"تمرین تناوبی برای افزایش سرعت متابولیسم",steps:["۱۰ دقیقه گرم‌کردن","۲۰ثانیه تلاش کامل + ۱۰ثانیه استراحت","۸ راند = ۴ دقیقه","۴–۶ بلوک با ۶۰ثانیه استراحت"],safety:"HIIT بیش از ۳ بار در هفته انجام ندهید."}
  ],
  corrective:[
    {icon:"🔧",title:"اصلاح سر به جلو (FHP)",desc:"برای دانشجویانی که زیاد با لپ‌تاپ کار می‌کنند",steps:["کشش SCM: سر را کج کنید، ۳۰ثانیه","تقویت عمقی: چین به داخل (Chin Tuck)","کشش قفسه سینه: دست‌ها پشت قفل"],safety:"اگر درد به بازو می‌رود به متخصص مراجعه کنید."},
    {icon:"🏗️",title:"اصلاح هایپرلوردوزیس",desc:"تقویت شکم و کشش فلکسورهای لگن",steps:["پلانک ۳×۳۰ثانیه","کشش هیپ فلکسور لانژ: ۴۵ثانیه","کرانچ اصلاحی ۳×۲۰"],safety:"از Bridge کمری خودداری کنید تا اصلاح شود."}
  ],
  stretch:[
    {icon:"🌊",title:"کشش کامل بدن (۱۵ دقیقه)",desc:"روتین بعد از هر تمرین",steps:["گردن: ۳۰ثانیه","سینه (دیوار): ۳۰ثانیه هر طرف","پشت (ماهی): ۳۰ثانیه","همسترینگ نشسته: ۳۰ثانیه هر پا","ساق (دیوار): ۳۰ثانیه"],safety:"کشش ایستا فقط بعد از گرم شدن."},
    {icon:"🧘",title:"یوگا شبانه برای خواب بهتر",desc:"بهبود کیفیت خواب دانشجویان",steps:["Child's Pose ۲ دقیقه","پیچش ستون‌فقرات ۱ دقیقه هر طرف","ساق‌ها بالای دیوار ۵ دقیقه","Savasana ۵ دقیقه"],safety:"اتاق تاریک، صفحه موبایل خاموش."}
  ],
  dorm:[
    {icon:"🏠",title:"۷ تمرین اتاق خوابگاه",desc:"در فضای ۲×۲ متر قابل اجرا",steps:["پوش‌آپ ۳×۱۰","اسکوات ۳×۱۵","پلانک ۳×۳۰ثانیه","لانژ ۳×۱۰","کرانچ ۳×۲۰","گلوت بریج ۳×۱۵","جامپینگ جک ۳×۳۰ثانیه"],safety:"از پریدن شدید در ساعات سکوت پرهیز کنید."},
    {icon:"📱",title:"تمرین با تایمر گوشی",desc:"استفاده از تایمر برای مدیریت تمرین",steps:["تایمر ۲۰ دقیقه‌ای","هر ۲ دقیقه یک تمرین جدید","۱۰ تمرین بدون استراحت طولانی","آب کافی بنوشید"],safety:"تهویه مناسب داشته باشید."}
  ]
};

const QUIZ = [
  {q:"حداقل فعالیت هوازی توصیه‌شده WHO برای بزرگسالان در هفته چقدر است؟",opts:["۷۵ دقیقه متوسط","۱۵۰ دقیقه متوسط","۳۰ دقیقه متوسط","۲۰۰ دقیقه پرشدت"],ans:1,exp:"WHO توصیه می‌کند ۱۵۰–۳۰۰ دقیقه فعالیت هوازی متوسط در هفته انجام شود."},
  {q:"کدام هورمون در اثر ورزش ترشح شده و موجب بهبود خلق‌وخو می‌گردد؟",opts:["کورتیزول","انسولین","اندورفین","آدرنالین"],ans:2,exp:"اندورفین‌ها مسکن‌های طبیعی بدن هستند که با ورزش ترشح می‌شوند."},
  {q:"HIIT مخفف چیست؟",opts:["High Intensity Interval Training","Heart Integrated Intense Training","Heavy Impact Interval Training","هیچ‌کدام"],ans:0,exp:"HIIT = تمرین تناوبی پرشدت که دوره فعالیت شدید را با استراحت کوتاه ترکیب می‌کند."},
  {q:"پلانک بیشتر کدام گروه عضلانی را هدف می‌گیرد؟",opts:["عضلات بازو","عضلات مرکزی (Core)","عضلات پا","عضلات پشت"],ans:1,exp:"پلانک یکی از بهترین تمرینات برای تقویت Core است."},
  {q:"VO₂max چه چیزی را اندازه می‌گیرد؟",opts:["سرعت دویدن","حداکثر اکسیژن مصرفی","فشار خون","ضربان قلب"],ans:1,exp:"VO₂max حداکثر ظرفیت بدن برای استفاده از اکسیژن در تمرین است."},
  {q:"کدام روش کشش برای قبل از ورزش مناسب‌تر است؟",opts:["کشش ایستا","کشش داینامیک","کشش بالستیک","هیچ‌کدام"],ans:1,exp:"کشش پویا (Dynamic) قبل از تمرین، عضلات را گرم و آماده می‌کند."},
  {q:"ضربان قلب هدف برای تمرین هوازی متوسط چقدر است؟",opts:["۴۰–۵۰٪","۶۰–۷۵٪","۸۵–۹۵٪","۱۰۰٪"],ans:1,exp:"منطقه هوازی ۶۰–۷۵٪ ضربان قلب ماکزیمم (۲۲۰ – سن) است."},
  {q:"فرمول Mifflin-St Jeor برای محاسبه چه استفاده می‌شود؟",opts:["BMI","BMR (متابولیسم پایه)","VO₂max","درصد چربی بدن"],ans:1,exp:"فرمول Mifflin-St Jeor دقیق‌ترین فرمول برای محاسبه BMR (نرخ متابولیسم پایه) است."},
  {q:"کدام ورزش کمترین فشار را بر مفاصل وارد می‌کند؟",opts:["دویدن","بسکتبال","شنا","وزنه‌برداری"],ans:2,exp:"شنا به دلیل شناوری در آب کمترین فشار مفصلی را دارد."},
  {q:"رفلکس میوتاتیک (Myotatic Reflex) در کشش بیش از حد چه نقشی دارد؟",opts:["عضله را شل می‌کند","از پارگی عضله جلوگیری می‌کند","انعطاف را افزایش می‌دهد","درد را کاهش می‌دهد"],ans:1,exp:"این رفلکس با انقباض سریع عضله از کشش بیش از حد و آسیب جلوگیری می‌کند."}
];

const CHALLENGES = [
  {day:1,lbl:"شنبه",em:"🚶",task:"۲۰ دقیقه پیاده‌روی سریع"},
  {day:2,lbl:"یکشنبه",em:"💪",task:"۳×۱۰ پوش‌آپ + پلانک ۱ دقیقه"},
  {day:3,lbl:"دوشنبه",em:"🧘",task:"۱۵ دقیقه یوگا آرام‌بخش"},
  {day:4,lbl:"سه‌شنبه",em:"⚡",task:"تاباتا ۴ دقیقه (۸ دور)"},
  {day:5,lbl:"چهارشنبه",em:"🤸",task:"کشش کامل بدن ۱۵ دقیقه"},
  {day:6,lbl:"پنج‌شنبه",em:"🏋️",task:"اسکوات ۳×۲۰ + لانژ ۳×۱۰"},
  {day:7,lbl:"جمعه",em:"🌟",task:"۳۰ دقیقه فعالیت دلخواه"}
];

/* ====================== STATE ====================== */
const S = {
  filter:"all", search:"",
  gender:"m",
  calGoal:-500,
  plannerData: JSON.parse(localStorage.getItem("sp_planner")||"[]"),
  challengeDone: JSON.parse(localStorage.getItem("sp_challenge")||"[]"),
  waterMl: parseInt(localStorage.getItem("sp_water")||"0"),
  waterGoal: 2500,
  exercises: [],
  // game
  gQ:0, gScore:0, gCorrect:0, gWrong:0, gTimer:null, gTimeLeft:15, gAnswered:false,
  // timer
  tRunning:false, tInterval:null, tPhase:"work", tCurrentRound:0, tTimeLeft:20, tElapsed:0, tCalBurned:0
};

/* ====================== LOADER ====================== */
(function(){
  const bar = document.getElementById("loaderBar");
  let w = 0;
  const iv = setInterval(()=>{
    w += Math.random()*15;
    if(w>=100){w=100;clearInterval(iv);setTimeout(()=>document.getElementById("pageLoader").classList.add("done"),400)}
    bar.style.width=w+"%";
  },100);
})();

/* ====================== HERO CANVAS ====================== */
function initCanvas(){
  const cv = document.getElementById("heroCanvas");
  const ctx = cv.getContext("2d");
  let W,H,particles=[];
  function resize(){W=cv.width=cv.offsetWidth;H=cv.height=cv.offsetHeight}
  resize();
  window.addEventListener("resize",resize);
  class P{
    constructor(){this.reset()}
    reset(){this.x=Math.random()*W;this.y=Math.random()*H;this.r=Math.random()*2+.5;this.vx=(Math.random()-.5)*.4;this.vy=-Math.random()*.6-.2;this.alpha=Math.random()*.6+.2}
    draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.r,0,Math.PI*2);ctx.fillStyle=`rgba(${Math.random()>0.5?"26,115,232":"0,137,123"},${this.alpha})`;ctx.fill()}
    update(){this.x+=this.vx;this.y+=this.vy;if(this.y<0)this.reset()}
  }
  for(let i=0;i<80;i++) particles.push(new P());
  function loop(){ctx.clearRect(0,0,W,H);particles.forEach(p=>{p.update();p.draw()});requestAnimationFrame(loop)}
  loop();
}

/* ====================== COUNTER ANIMATION ====================== */
function animateCounters(){
  document.querySelectorAll(".hs-n").forEach(el=>{
    const target=parseInt(el.dataset.to);
    let cur=0;
    const step=()=>{cur+=1;el.textContent=cur;if(cur<target)setTimeout(step,50)};
    step();
  });
}

/* ====================== SCROLL / SIDE DOTS ====================== */
function initScroll(){
  const sections=document.querySelectorAll(".sec,.hero");
  const dots=document.querySelectorAll(".sdot");
  const hdr=document.getElementById("hdr");
  function onScroll(){
    if(window.scrollY>60) hdr.classList.add("scrolled"); else hdr.classList.remove("scrolled");
    const mid=window.scrollY+window.innerHeight/2;
    sections.forEach((s,i)=>{
      const top=s.offsetTop, bot=top+s.offsetHeight;
      if(mid>=top&&mid<=bot){dots.forEach(d=>d.classList.remove("active"));if(dots[i])dots[i].classList.add("active")}
    });
  }
  window.addEventListener("scroll",onScroll);
}

/* ====================== NAV ====================== */
function initNav(){
  const btn=document.getElementById("hamBtn");
  const menu=document.getElementById("mobileMenu");
  btn.addEventListener("click",()=>menu.classList.toggle("open"));
  menu.querySelectorAll("a").forEach(a=>a.addEventListener("click",()=>menu.classList.remove("open")));
}

/* ====================== IDEAS ====================== */
function catStyle(c){
  const m={cardio:{bg:"#e3f2fd",col:"#1565c0"},strength:{bg:"#fce4ec",col:"#c62828"},stretch:{bg:"#e1f5fe",col:"#0277bd"},group:{bg:"#fff9c4",col:"#f57f17"},dorm:{bg:"#f3e5f5",col:"#6a1b9a"},mindful:{bg:"#e8f5e9",col:"#2e7d32"}};
  return m[c]||{bg:"#f5f5f5",col:"#424242"};
}
function renderIdeas(){
  const g=document.getElementById("ideasGrid");
  let list=IDEAS;
  if(S.filter!=="all") list=list.filter(i=>i.cat===S.filter);
  if(S.search) list=list.filter(i=>i.title.includes(S.search)||i.catL.includes(S.search)||i.desc.includes(S.search));
  if(!list.length){g.innerHTML=`<div style="grid-column:1/-1;text-align:center;color:var(--text2);padding:60px;font-size:16px">هیچ ایده‌ای یافت نشد 🔍</div>`;return}
  g.innerHTML=list.map(id=>{
    const s=catStyle(id.cat);
    return `<div class="ic" data-id="${id.id}">
      <div class="ic-top"><div class="ic-em" style="background:${s.bg}">${id.emoji}</div><div><div class="ic-ttl">${id.title}</div><span class="ic-cat" style="background:${s.bg};color:${s.col}">${id.catL}</span></div></div>
      <div class="ic-body"><p class="ic-desc">${id.desc}</p><div class="ic-tags"><span class="ic-tag">⏱ ${id.dur}</span><span class="ic-tag">👥 ${id.ppl}</span><span class="ic-tag" style="color:var(--sec)">🎯 ${id.goal}</span></div></div>
      <div class="ic-foot"><span style="font-size:12px;color:var(--text2)">هدف آموزشی</span><button class="ic-btn" onclick="openMod(${id.id})">جزئیات ←</button></div>
    </div>`;
  }).join("");
}

function openMod(id){
  const idea=IDEAS.find(i=>i.id===id);
  if(!idea) return;
  document.getElementById("mBox").innerHTML=`
    <div class="mod-hdr"><div class="mod-em">${idea.emoji}</div><div class="mod-ttl">${idea.title}</div><button class="mod-close" onclick="closeMod()">✕</button></div>
    <div class="mod-body">
      <div class="mod-sec"><h4>🎓 هدف آموزشی (علمی)</h4><p>${idea.edu}</p></div>
      <div class="mod-sec"><h4>💪 فواید جسمانی</h4><p>${idea.phys}</p></div>
      <div class="mod-sec"><h4>🧠 فواید روان‌شناختی</h4><p>${idea.psych}</p></div>
      <div class="mod-sec"><h4>📋 مراحل اجرا</h4><ol>${idea.steps.map(s=>`<li>${s}</li>`).join("")}</ol></div>
      <div class="mod-sec"><h4>⚠️ ایمنی</h4><p style="color:#e65100">${idea.safety}</p></div>
      <div class="mod-sec"><div style="display:flex;gap:12px;flex-wrap:wrap"><span class="ic-tag">⏱ ${idea.dur}</span><span class="ic-tag">👥 ${idea.ppl}</span></div></div>
    </div>`;
  document.getElementById("mOv").classList.add("open");
}
function closeMod(e){if(!e||e.target===document.getElementById("mOv")) document.getElementById("mOv").classList.remove("open")}

function initIdeas(){
  document.querySelectorAll(".fb").forEach(b=>b.addEventListener("click",()=>{
    document.querySelectorAll(".fb").forEach(x=>x.classList.remove("active"));b.classList.add("active");S.filter=b.dataset.f;renderIdeas();
  }));
  document.getElementById("searchIn").addEventListener("input",e=>{S.search=e.target.value.trim();renderIdeas()});
  renderIdeas();
}

/* ====================== BMI ====================== */
function setGender(g){S.gender=g;document.getElementById("genM").classList.toggle("active",g==="m");document.getElementById("genF").classList.toggle("active",g==="f");updateBMI()}
function updateBMI(){
  const age=+document.getElementById("bmiAge").value;
  const h=+document.getElementById("bmiH").value;
  const w=+document.getElementById("bmiW").value;
  document.getElementById("bmiAgeV").textContent=age;
  document.getElementById("bmiHV").textContent=h;
  document.getElementById("bmiWV").textContent=w;
  const bmi=w/((h/100)**2);
  document.getElementById("bmiVal").textContent=bmi.toFixed(1);
  // needle: bmi 10=0deg, 40=180deg
  const deg=Math.min(Math.max((bmi-10)/30*180,0),180);
  document.getElementById("gNeedle").setAttribute("transform",`rotate(${deg-90} 100 100)`);
  let txt,color;
  if(bmi<18.5){txt="🔵 کم‌وزن";color="#42a5f5"}
  else if(bmi<25){txt="✅ وزن طبیعی";color="#66bb6a"}
  else if(bmi<30){txt="🟠 اضافه‌وزن";color="#ffa726"}
  else{txt="🔴 چاقی";color="#ef5350"}
  const badge=document.getElementById("bmiBadge");
  badge.textContent=txt;badge.style.color=color;badge.style.borderColor=color;
  // advice
  const adv=document.getElementById("bmiAdvice");
  if(bmi<18.5) adv.innerHTML="توصیه: افزایش کالری دریافتی با غذاهای مقوی، تمرینات قدرتی برای افزایش توده عضلانی. مشاوره با متخصص تغذیه توصیه می‌شود.";
  else if(bmi<25) adv.innerHTML="عالی! وزن شما در محدوده سالم است. ادامه فعالیت بدنی منظم و تغذیه متوازن را حفظ کنید.";
  else if(bmi<30) adv.innerHTML="توصیه: کاهش کالری دریافتی (۵۰۰ کالری در روز)، افزایش فعالیت هوازی به ۱۵۰ دقیقه در هفته.";
  else adv.innerHTML="توصیه اورژانسی: مشاوره با پزشک ضروری است. برنامه غذایی کنترل‌شده و فعالیت بدنی سبک (پیاده‌روی) شروع کنید.";
  // ideal weight
  const idealMin=(18.5*(h/100)**2).toFixed(1), idealMax=(24.9*(h/100)**2).toFixed(1);
  document.getElementById("bmiIdeal").textContent=`وزن ایده‌آل برای قد شما: ${idealMin} – ${idealMax} کیلوگرم`;
}

/* ====================== CALORIE ====================== */
function setGoal(btn,g){
  document.querySelectorAll(".gb2").forEach(b=>b.classList.remove("active"));btn.classList.add("active");S.calGoal=g;
}
function calcCal(){
  const age=+document.getElementById("cAge").value;
  const h=+document.getElementById("cH").value;
  const w=+document.getElementById("cW").value;
  const gen=document.getElementById("cGen").value;
  const act=+document.getElementById("cAct").value;
  // Mifflin-St Jeor
  const bmr=gen==="m"?10*w+6.25*h-5*age+5:10*w+6.25*h-5*age-161;
  const tdee=Math.round(bmr*act);
  const target=Math.round(tdee+S.calGoal);
  document.getElementById("vBMR").textContent=Math.round(bmr);
  document.getElementById("vTDEE").textContent=tdee;
  document.getElementById("vGoal").textContent=target;
  // macros
  const protein=Math.round(w*1.8); // g
  const fat=Math.round(target*0.25/9); // g
  const carb=Math.round((target-protein*4-fat*9)/4); // g
  document.getElementById("macroWrap").innerHTML=`
    <div class="macro-row">
      <div class="macro-item"><b>${protein}g</b><small>پروتئین<br/>۴ kcal/g</small></div>
      <div class="macro-item"><b>${carb}g</b><small>کربوهیدرات<br/>۴ kcal/g</small></div>
      <div class="macro-item"><b>${fat}g</b><small>چربی<br/>۹ kcal/g</small></div>
    </div>
    <div style="margin-bottom:12px">
      ${[["پروتئین",protein*4,target,"#ef5350"],["کربوهیدرات",carb*4,target,"#42a5f5"],["چربی",fat*9,target,"#ffa726"]].map(([nm,cal,tot,c])=>`
        <div class="macro-bar-row"><div class="macro-bar-label"><span>${nm}</span><span>${cal} kcal</span></div>
        <div class="macro-bar-track"><div class="macro-bar-fill" style="width:${Math.round(cal/tot*100)}%;background:${c}"></div></div></div>`).join("")}
    </div>`;
  document.getElementById("foodEq").innerHTML=`<div class="food-eq">
    <h4>🍽️ معادل غذایی (کالری روزانه شما)</h4>
    <div class="food-eq-grid">
      <span class="feq">🍚 ${Math.round(target/130)} پیاله برنج</span>
      <span class="feq">🍗 ${Math.round(target/200)} قطعه مرغ</span>
      <span class="feq">🥚 ${Math.round(target/70)} تخم‌مرغ</span>
      <span class="feq">🍌 ${Math.round(target/90)} عدد موز</span>
    </div></div>`;
  document.getElementById("calRes").style.display="block";
  document.getElementById("calRes").scrollIntoView({behavior:"smooth",block:"nearest"});
}

/* ====================== ROADMAP ====================== */
function makeRoadmap(){
  const cur=+document.getElementById("rmCur").value;
  const tar=+document.getElementById("rmTar").value;
  const wks=+document.getElementById("rmWks").value;
  const act=+document.getElementById("rmAct").value;
  const diff=cur-tar; // positive = lose, negative = gain
  const isLose=diff>0;
  const kgPerWeek=Math.abs(diff/wks);
  const calPerDay=Math.round(kgPerWeek*7700/7);
  const res=document.getElementById("rmRes");
  const summ=document.getElementById("rmSumm");
  const phase=document.getElementById("rmPhase");
  const tips=document.getElementById("rmTips");
  summ.innerHTML=`<div class="rm-sum"><h3>${isLose?"🔥 برنامه کاهش وزن":"⬆️ برنامه افزایش وزن"}</h3>
    <div class="rm-sum-items">
      <div class="rsi"><b>${Math.abs(diff)}</b><small>کیلو ${isLose?"کاهش":"افزایش"}</small></div>
      <div class="rsi"><b>${wks}</b><small>هفته</small></div>
      <div class="rsi"><b>${kgPerWeek.toFixed(2)}</b><small>kg/هفته</small></div>
      <div class="rsi"><b>${calPerDay}</b><small>کالری/روز ${isLose?"کسری":"اضافه"}</small></div>
    </div></div>`;
  // phases
  const phases=isLose?[
    {t:"فاز ۱ – پایه‌گذاری",d:`هفته‌های ۱–${Math.round(wks*0.3)}: کاهش کالری ${Math.round(calPerDay*0.5)} kcal در روز. شروع پیاده‌روی روزانه ۲۰–۳۰ دقیقه. تنظیم وعده‌های غذایی.`,w:Math.round(wks*0.3)},
    {t:"فاز ۲ – شتاب‌دهی",d:`هفته‌های ${Math.round(wks*0.3)+1}–${Math.round(wks*0.7)}: کاهش کامل ${calPerDay} kcal در روز. تمرین هوازی ۳–۴ روز + قدرتی ۲ روز. افزایش پروتئین.`,w:Math.round(wks*0.4)},
    {t:"فاز ۳ – تثبیت",d:`هفته‌های ${Math.round(wks*0.7)+1}–${wks}: تثبیت عادت‌های جدید. حفظ برنامه تمرینی. تدریج به سمت وزن هدف.`,w:Math.round(wks*0.3)}
  ]:[
    {t:"فاز ۱ – آماده‌سازی",d:`هفته‌های ۱–${Math.round(wks*0.25)}: افزایش ۲۰۰ kcal در روز. شروع تمرینات قدرتی پایه.`,w:Math.round(wks*0.25)},
    {t:"فاز ۲ – حجم‌دهی",d:`هفته‌های ${Math.round(wks*0.25)+1}–${Math.round(wks*0.75)}: افزایش کامل ${calPerDay} kcal. تمرینات قدرتی ۴–۵ روز با اضافه‌بار تدریجی.`,w:Math.round(wks*0.5)},
    {t:"فاز ۳ – تثبیت عضله",d:`هفته‌های ${Math.round(wks*0.75)+1}–${wks}: کاهش کمی کالری برای حذف چربی اضافه. حفظ برنامه قدرتی.`,w:Math.round(wks*0.25)}
  ];
  phase.innerHTML=`<div class="rm-phases-title">📌 فازبندی برنامه</div>${phases.map((p,i)=>`<div class="phase-item"><div class="phase-num">${i+1}</div><div class="phase-body"><h4>${p.t} (${p.w} هفته)</h4><p>${p.d}</p></div></div>`).join("")}`;
  tips.innerHTML=`<div class="rm-tips"><h4>💡 نکات کلیدی</h4><ul>${(isLose?[
    "کمبود کالری روزانه نباید از ۱۰۰۰ kcal بیشتر شود",
    "پروتئین را بالا نگه دارید (۱.۶–۲.۲ g/kg وزن)",
    "آب کافی بنوشید (۳۰–۳۵ ml/kg)",
    "خواب کافی (۷–۹ ساعت) برای کاهش کورتیزول ضروری است"
  ]:[
    "اضافه کالری روزانه نباید از ۵۰۰ kcal بیشتر شود",
    "پروتئین بالا (۱.۸–۲.۵ g/kg) برای رشد عضله",
    "تمرین قدرتی اساس برنامه افزایش وزن سالم است",
    "صبر داشته باشید: عضله‌سازی کند اما پایدار است"
  ]).map(t=>`<li>${t}</li>`).join("")}</ul></div>`;
  res.style.display="block";
}

/* ====================== TIMER ====================== */
let tWork=20,tRest=10,tRounds=8,tCurrentRound=0,tPhase="work",tTimeLeft=0,tInterval=null,tElapsed=0,tCal=0,tRunning=false;
function applyPre(w,r,n){
  document.getElementById("tWork").value=w;
  document.getElementById("tRest").value=r;
  document.getElementById("tRnd").value=n;
  tReset();
}
function addEx(){
  const v=document.getElementById("exIn").value.trim();
  if(!v) return;
  S.exercises.push(v);document.getElementById("exIn").value="";renderEx();
}
function renderEx(){
  document.getElementById("exList").innerHTML=S.exercises.map((e,i)=>
    `<div class="ex-chip">${e}<button onclick="removeEx(${i})">×</button></div>`).join("");
}
function removeEx(i){S.exercises.splice(i,1);renderEx()}

function tStart(){
  if(tRunning) return;
  tWork=+document.getElementById("tWork").value;
  tRest=+document.getElementById("tRest").value;
  tRounds=+document.getElementById("tRnd").value;
  if(tCurrentRound===0){tCurrentRound=1;tPhase="work";tTimeLeft=tWork}
  tRunning=true;
  const ring=document.getElementById("tRing");
  const circ=2*Math.PI*85;
  tInterval=setInterval(()=>{
    tElapsed++;tTimeLeft--;
    const exIdx=(tCurrentRound-1)%Math.max(S.exercises.length,1);
    document.getElementById("tExNow").textContent=S.exercises[exIdx]||"—";
    document.getElementById("tElapsed").textContent=fmt(tElapsed);
    if(tPhase==="work") tCal+=0.15;
    document.getElementById("tCal").textContent=Math.round(tCal);
    // progress ring
    const total=tPhase==="work"?tWork:tRest;
    const offset=circ*(1-(tTimeLeft/total));
    ring.style.strokeDashoffset=offset;
    ring.style.stroke=tPhase==="work"?"var(--acc)":"var(--sec)";
    document.getElementById("tNum").textContent=tTimeLeft<10?"0"+tTimeLeft:tTimeLeft;
    document.getElementById("tSub").textContent=`راند ${tCurrentRound}/${tRounds}`;
    document.getElementById("tPhase").textContent=tPhase==="work"?"💥 تمرین":"😮‍💨 استراحت";
    if(tTimeLeft<=0){
      if(tPhase==="work"){tPhase="rest";tTimeLeft=tRest}
      else{tCurrentRound++;if(tCurrentRound>tRounds){tReset();alert("🎉 تمرین تمام شد! آفرین!");return}tPhase="work";tTimeLeft=tWork}
    }
  },1000);
}
function tPause(){if(tRunning){clearInterval(tInterval);tRunning=false;document.getElementById("tPhase").textContent="⏸ مکث"}}
function tReset(){clearInterval(tInterval);tRunning=false;tCurrentRound=0;tPhase="work";tElapsed=0;tCal=0;
  document.getElementById("tNum").textContent="00";
  document.getElementById("tSub").textContent="راند 0/0";
  document.getElementById("tPhase").textContent="آماده";
  document.getElementById("tElapsed").textContent="0:00";
  document.getElementById("tCal").textContent="0";
  const ring=document.getElementById("tRing");ring.style.strokeDashoffset=0;ring.style.stroke="var(--pri)";
}
function fmt(s){return`${Math.floor(s/60)}:${(s%60<10?"0":"")+s%60}`}

/* ====================== WATER ====================== */
function calcWater(){
  const kg=+document.getElementById("wKg").value;
  S.waterGoal=Math.round(kg*35);
  document.getElementById("wNeed").textContent=`نیاز روزانه شما: ${S.waterGoal} ml (بر اساس ۳۵ml/kg)`;
  updateWater();
}
function addW(ml){S.waterMl+=ml;localStorage.setItem("sp_water",S.waterMl);addWLog(ml);updateWater()}
function addCustomW(){const v=+document.getElementById("wCustom").value;if(v>0){addW(v);document.getElementById("wCustom").value=""}}
function resetW(){S.waterMl=0;localStorage.setItem("sp_water",0);document.getElementById("wLog").innerHTML="";updateWater()}
function addWLog(ml){const log=document.getElementById("wLog");const t=new Date().toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"});log.innerHTML=`<div class="w-log-item">💧 ${ml} ml — ${t}</div>`+log.innerHTML}
function updateWater(){
  const pct=Math.min(S.waterMl/S.waterGoal*100,100);
  document.getElementById("wFill").style.height=pct+"%";
  document.getElementById("wPct").textContent=Math.round(pct)+"%";
  document.getElementById("wMl").textContent=`${S.waterMl} / ${S.waterGoal} ml`;
  const em=pct>=100?"🎉":pct>=75?"😊":pct>=50?"😐":pct>=25?"🥱":"😴";
  document.getElementById("wEmoji").textContent=em;
}

/* ====================== TRAINING ====================== */
function renderTraining(tab){
  const data=TRAINING_DATA[tab]||[];
  document.getElementById("trGrid").innerHTML=data.map(c=>`
    <div class="tr-c"><div class="tr-c-icon">${c.icon}</div><h3>${c.title}</h3><p>${c.desc}</p>
    <ol class="tr-steps">${c.steps.map(s=>`<li>${s}</li>`).join("")}</ol>
    <div class="safety-note">⚠️ ${c.safety}</div></div>`).join("");
}
function initTraining(){
  document.querySelectorAll(".tt").forEach(b=>b.addEventListener("click",()=>{
    document.querySelectorAll(".tt").forEach(x=>x.classList.remove("active"));b.classList.add("active");renderTraining(b.dataset.t);
  }));
  renderTraining("fitness");
}

/* ====================== GAME ====================== */
function startG(){
  S.gQ=0;S.gScore=0;S.gCorrect=0;S.gWrong=0;
  document.getElementById("gStart").classList.add("hidden");
  document.getElementById("gRes").classList.add("hidden");
  document.getElementById("gPlay").classList.remove("hidden");
  loadQ();
}
function loadQ(){
  if(S.gQ>=QUIZ.length){endG();return}
  S.gAnswered=false;
  clearInterval(S.gTimer);S.gTimeLeft=15;
  const q=QUIZ[S.gQ];
  document.getElementById("gQn").textContent=S.gQ+1;
  document.getElementById("gSc").textContent=S.gScore;
  document.getElementById("qBarFill").style.width=((S.gQ)/QUIZ.length*100)+"%";
  document.getElementById("qTxt").textContent=q.q;
  document.getElementById("qExp").classList.add("hidden");
  document.getElementById("qOpts").innerHTML=q.opts.map((o,i)=>
    `<button class="qo" onclick="answerG(${i})">${o}</button>`).join("");
  updateGTimer();
  S.gTimer=setInterval(()=>{S.gTimeLeft--;updateGTimer();if(S.gTimeLeft<=0){clearInterval(S.gTimer);if(!S.gAnswered)revealG(-1)}},1000);
}
function updateGTimer(){
  const pct=(S.gTimeLeft/15)*100;
  document.getElementById("gTrFill").style.width=pct+"%";
  document.getElementById("gTrN").textContent=S.gTimeLeft;
  document.getElementById("gTrFill").style.background=S.gTimeLeft<=5?"#f44336":S.gTimeLeft<=10?"#ffc107":"#76ff03";
}
function answerG(i){if(S.gAnswered)return;S.gAnswered=true;clearInterval(S.gTimer);revealG(i)}
function revealG(sel){
  const q=QUIZ[S.gQ];
  document.querySelectorAll(".qo").forEach((b,i)=>{b.disabled=true;if(i===q.ans)b.classList.add("correct");else if(i===sel)b.classList.add("wrong")});
  if(sel===q.ans){S.gScore+=10+S.gTimeLeft;S.gCorrect++}else S.gWrong++;
  document.getElementById("gSc").textContent=S.gScore;
  document.getElementById("qExp").textContent=q.exp;document.getElementById("qExp").classList.remove("hidden");
  S.gQ++;setTimeout(loadQ,2000);
}
function endG(){
  document.getElementById("gPlay").classList.add("hidden");document.getElementById("gRes").classList.remove("hidden");
  const pct=(S.gCorrect/QUIZ.length)*100;
  let medal="🥇",title="",msg="";
  if(pct>=80){medal="🥇";title="عالی!";msg="دانش ورزشی فوق‌العاده‌ای دارید. آماده تدریس هستید!"}
  else if(pct>=60){medal="🥈";title="خوب!";msg="عملکرد خوبی داشتید. کمی مطالعه بیشتر کافی است."}
  else{medal="🥉";title="نیاز به تمرین";msg="بخش آموزش سایت را مطالعه کنید."}
  document.getElementById("rMedal").textContent=medal;document.getElementById("rTitle").textContent=title;
  document.getElementById("rScore").textContent=`امتیاز: ${S.gScore}`;document.getElementById("rMsg").textContent=msg;
  document.getElementById("rStats").innerHTML=`<span>✅ صحیح: ${S.gCorrect}</span><span>❌ غلط: ${S.gWrong}</span><span>📊 دقت: ${Math.round(pct)}%</span>`;
}
function restartG(){document.getElementById("gRes").classList.add("hidden");document.getElementById("gStart").classList.remove("hidden")}
function showGStart(){document.getElementById("gPlay").classList.add("hidden");document.getElementById("gRes").classList.add("hidden");document.getElementById("gStart").classList.remove("hidden")}

/* ====================== PLANNER ====================== */
function addPlan(){
  const day=document.getElementById("plDay").value;
  const study=+document.getElementById("plStudy").value;
  const sport=+document.getElementById("plSport").value;
  const rest=+document.getElementById("plRest").value;
  S.plannerData=S.plannerData.filter(p=>p.day!==day);
  S.plannerData.push({day,study,sport,rest});
  const order=["شنبه","یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه"];
  S.plannerData.sort((a,b)=>order.indexOf(a.day)-order.indexOf(b.day));
  localStorage.setItem("sp_planner",JSON.stringify(S.plannerData));
  renderPlanner();
}
function clearPlan(){S.plannerData=[];localStorage.setItem("sp_planner","[]");renderPlanner()}
function delPlan(day){S.plannerData=S.plannerData.filter(p=>p.day!==day);localStorage.setItem("sp_planner",JSON.stringify(S.plannerData));renderPlanner()}
function planStatus(p){
  const sh=p.sport/60;
  if(p.sport>=30&&p.rest>=7&&sh/Math.max(p.study,1)>=0.07) return{l:"تعادل مناسب ✅",c:"g"};
  if(p.sport>=15||p.rest>=6) return{l:"نسبتاً مناسب ⚠️",c:"w"};
  return{l:"نیاز به تعادل ❌",c:"b"};
}
function renderPlanner(){
  const body=document.getElementById("plBody"),empty=document.getElementById("plEmpty"),bal=document.getElementById("balBox");
  if(!S.plannerData.length){body.innerHTML="";empty.style.display="block";bal.style.display="none";document.getElementById("weekChart").style.display="none";return}
  empty.style.display="none";
  const good=S.plannerData.filter(p=>planStatus(p).c==="g").length;
  bal.style.display="flex";
  bal.innerHTML=`<span style="font-size:20px">${good>=S.plannerData.length*.7?"🎉":"⚡"}</span><span>${good>=S.plannerData.length*.7?`برنامه هفتگی شما تعادل خوبی دارد! ${good}/${S.plannerData.length} روز مناسب.`:"ورزش و استراحت بیشتری در برنامه بگنجانید."}</span>`;
  body.innerHTML=S.plannerData.map(p=>{const st=planStatus(p);return`<tr><td><b>${p.day}</b></td><td>${p.study}h</td><td>${p.sport}min</td><td>${p.rest}h</td><td><span class="sb ${st.c}">${st.l}</span></td><td><button class="del-btn" onclick="delPlan('${p.day}')">🗑️</button></td></tr>`}).join("");
  // chart
  drawWeekChart();
}
function drawWeekChart(){
  document.getElementById("weekChart").style.display="block";
  const cv=document.getElementById("wChart");
  const ctx=cv.getContext("2d");
  cv.width=cv.offsetWidth;
  ctx.clearRect(0,0,cv.width,cv.height);
  const data=S.plannerData;
  const maxVal=Math.max(...data.map(p=>Math.max(p.study,p.sport/60,p.rest)));
  const barW=Math.floor(cv.width/data.length/3)-4;
  const H=cv.height-30;
  data.forEach((p,i)=>{
    const x=i*(cv.width/data.length)+10;
    const s=colors=>[["#42a5f5",p.study,maxVal],["#66bb6a",p.sport/60,maxVal],["#ffa726",p.rest,maxVal]];
    [["#42a5f5",p.study],["#66bb6a",p.sport/60],["#ffa726",p.rest]].forEach(([c,v],j)=>{
      ctx.fillStyle=c;const h=Math.round((v/maxVal)*H);ctx.fillRect(x+j*(barW+3),H-h,barW,h);
    });
    ctx.fillStyle="#546e8a";ctx.font="10px Vazirmatn,Tahoma";ctx.textAlign="center";ctx.fillText(p.day,x+barW*1.5,H+16);
  });
  ctx.fillStyle="#42a5f5";ctx.fillRect(10,H+22,10,8);ctx.fillStyle="#546e8a";ctx.font="10px Vazirmatn";ctx.textAlign="right";ctx.fillText("مطالعه",50,H+30);
  ctx.fillStyle="#66bb6a";ctx.fillRect(60,H+22,10,8);ctx.fillText("ورزش",105,H+30);
  ctx.fillStyle="#ffa726";ctx.fillRect(115,H+22,10,8);ctx.fillText("استراحت",165,H+30);
}

/* ====================== CHALLENGE ====================== */
function renderChallenge(){
  const g=document.getElementById("chGrid");
  g.innerHTML=CHALLENGES.map(c=>{
    const done=S.challengeDone.includes(c.day);
    return`<div class="ch-day ${done?"done":""}">
      <div class="ch-dn">روز ${c.day}</div><div class="ch-dl">${c.lbl}</div>
      <div class="ch-em">${c.em}</div><div class="ch-tk">${c.task}</div>
      <div class="ch-done-badge">✅ انجام شد</div>
      <button class="ch-btn" onclick="doneChallenge(${c.day})">انجام دادم!</button>
    </div>`;
  }).join("");
  updateChallengeProgress();
}
function doneChallenge(day){if(!S.challengeDone.includes(day)){S.challengeDone.push(day);localStorage.setItem("sp_challenge",JSON.stringify(S.challengeDone))}renderChallenge()}
function updateChallengeProgress(){
  const pct=Math.round(S.challengeDone.length/7*100);
  document.getElementById("chFl").style.width=pct+"%";
  document.getElementById("chPct").textContent=pct+"%";
  const m=pct===100?"🏆 آفرین! چالش ۷ روزه را با موفقیت تکمیل کردید!":pct>=70?"🔥 عالی! داری خوب پیش میری!":pct>=40?"⚡ خوبه! ادامه بده!":pct>0?"💪 شروع خوبی داشتی!":"روی دکمه 'انجام دادم' کلیک کن پس از هر روز.";
  document.getElementById("chAch").textContent=m;
}

/* ====================== CERTIFICATE ====================== */
function makeCert(){
  const name=document.getElementById("ceName").value.trim();
  const major=document.getElementById("ceMajor").value.trim();
  const prov=document.getElementById("ceProv").value.trim();
  if(!name){alert("لطفاً نام خود را وارد کنید.");return}
  document.getElementById("cdName").textContent=name;
  document.getElementById("cdMajor").textContent=major||"تربیت بدنی";
  document.getElementById("cdProv").textContent=prov||"—";
  const now=new Date();document.getElementById("cdDate").textContent=`تاریخ: ${now.toLocaleDateString("fa-IR")}`;
  document.getElementById("certPrev").style.display="block";
  document.getElementById("certPrev").scrollIntoView({behavior:"smooth"});
}
function printCert(){window.print()}

/* ====================== INIT ====================== */
document.addEventListener("DOMContentLoaded",()=>{
  initCanvas();
  initNav();
  initScroll();
  initIdeas();
  initTraining();
  updateBMI();
  updateWater();
  renderChallenge();
  renderPlanner();
  setTimeout(animateCounters,1000);
  // init water log if exists
  if(S.waterMl>0) document.getElementById("wMl").textContent=`${S.waterMl} / ${S.waterGoal} ml`;
});
</script>
</body>
</html>